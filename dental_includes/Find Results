Searching 946 files for "patient_details"

C:\wamp\www\clinic\dental\dental_b\index - Copy (2).php:
  954  						$sql1=$error1=$s1='';$placeholders1=array();
  955  						$sql1="select new_appointment_id, concat(first_name,' ', middle_name,' ', last_name) as names from registered_patient_appointments  as a
  956: 							join patient_details_a as b on a.pid=b.pid and a.id=:id";
  957  						$error1="Unable to check if new  appointment is set for re-appointment";
  958  						$placeholders1[':id']=$appointment_id;
  ...
 1030  				$sql=$error=$s='';$placeholders=array();
 1031  				$sql="select insurance_company.name,covered_company.name 
 1032: 						from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1033: 						left join covered_company on patient_details_a.company_covered=covered_company.id 
 1034  						where pid=:pid";
 1035  				$placeholders['pid']=$pid;
 ....
 1593  			$sql=$error=$s='';$placeholders=array();
 1594  			$sql="select insurance_company.name,covered_company.name 
 1595: 					from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1596: 					left join covered_company on patient_details_a.company_covered=covered_company.id 
 1597  					where pid=:pid";
 1598  			$placeholders['pid']=$pid;
 ....
 1835  						$sql=$error=$s='';$placeholders=array();
 1836  						$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 1837: 							from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 1838  							and b.appointment_date=:appointment_date
 1839  							join users as c on c.id=b.doc_id";
 ....
 3689  			$pre_auth_needed=$smart_needed='';
 3690  			$sql=$error1=$s='';$placeholders=array();
 3691: 			$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 3692  				and b.pid=:pid";
 3693  			$error="Unable to check if pre-auth is needed";
 ....
 5967  			$_SESSION['tplan_id']='';
 5968  				$sql=$error=$s='';$placeholders=array();
 5969: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 5970  				$error="Unable to get pid";
 5971  				$placeholders[':patient_number']=$encrypt->decrypt($_POST['goto_pt_contact']);
 ....
 5984  			$_SESSION['tplan_id']='';
 5985  				$sql=$error=$s='';$placeholders=array();
 5986: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 5987  				$error="Unable to get pid";
 5988  				$placeholders[':patient_number']=$_POST['goto_pt_contact2'];
 ....
 6001  			$_SESSION['tplan_id']='';
 6002  				$sql=$error=$s='';$placeholders=array();
 6003: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 6004  				$error="Unable to get pid";
 6005  				$placeholders[':patient_number']=$_POST['goto_tdone2'];
 ....
 6018  			$_SESSION['tplan_id']='';
 6019  				$sql=$error=$s='';$placeholders=array();
 6020: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 6021  				$error="Unable to get pid";
 6022  				$placeholders[':patient_number']=$encrypt->decrypt($_POST['goto_tdone']);
 ....
 6178  					$placeholders[':id']=$encrypt->decrypt($_POST['allocated_patient']);
 6179  				}			
 6180: 				//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 6181  				
 6182  				$error="Error: Unable to edit waiting list";
 ....
 6945  			
 6946  		//	echo "-3157-";
 6947: 			//now insert into patient_details_a
 6948  			$sql=$error=$s='';$placeholders=array();
 6949: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 6950  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 6951  					year=:year, internal_patient=2";
 ....
 6963  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 6964  		//	echo "-3175-";
 6965: 			//now insert into patient_details_b
 6966  			$sql=$error=$s='';$placeholders=array();
 6967: 			$sql="insert into patient_details_b set  when_added=:when_added,
 6968  					 pid=:pid,  referee=:referee";
 6969  			$error="Unable to add patient new patient";
 ....
 6977  				//check if pre-auth or smart is needed for this patient
 6978  				$sql=$error1=$s='';$placeholders=array();
 6979: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 6980  					and b.pid=:pid";
 6981  				$error="Unable to check if pre-auth is needed";
 ....
 7350  			
 7351  		//	echo "-3157-";
 7352: 			//now insert into patient_details_a
 7353  			$sql=$error=$s='';$placeholders=array();
 7354: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 7355  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 7356  					year=:year, internal_patient=1";
 ....
 7368  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 7369  		//	echo "-3175-";
 7370: 			//now insert into patient_details_b
 7371  			$sql=$error=$s='';$placeholders=array();
 7372: 			$sql="insert into patient_details_b set  when_added=:when_added,
 7373  					 pid=:pid,  referee=:referee";
 7374  			$error="Unable to add patient new patient";
 ....
 7383  				//check if pre-auth or smart is needed for this patient
 7384  				$sql=$error1=$s='';$placeholders=array();
 7385: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 7386  					and b.pid=:pid";
 7387  				$error="Unable to check if pre-auth is needed";
 ....
 8992  	//check if pre-auth or smart is needed for this patient
 8993  	$sql=$error1=$s='';$placeholders=array();
 8994: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 8995  		and b.pid=:pid";
 8996  	$error="Unable to check if pre-auth is needed";
 ....
 10434  	$sql=$error=$s='';$placeholders=array();
 10435  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 10436: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 10437  	$placeholders[':appointment_date']=$appointment_date;
 10438  	$error="Unable to get registerd appointments";
 .....
 10598  	$sql=$error=$s='';$placeholders=array();
 10599  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 10600: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 10601  	$placeholders[':appointment_date']=$appointment_date;
 10602  	$error="Unable to get registerd appointments";
 .....
 11072  	$sql=$error=$s='';$placeholders=array();
 11073  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 11074: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 11075  		and b.appointment_date=:appointment_date
 11076  		join users as c on c.id=b.doc_id";
 .....
 11247  	$pre_auth_needed=$smart_needed='';
 11248  	$sql=$error1=$s='';$placeholders=array();
 11249: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 11250  		and b.pid=:pid";
 11251  	$error="Unable to check if pre-auth is needed";
 .....
 11828  				//get patient number will be used to refresh page
 11829  				$sql=$error1=$s='';$placeholders=array();
 11830: 				$sql="select patient_number from patient_details_a where pid=:pid";
 11831  				$error="Unable to get patient number";
 11832  				$placeholders[':pid']=$pid;
 .....
 11896  	$pre_auth_needed=$smart_needed='';
 11897  	$sql=$error1=$s='';$placeholders=array();
 11898: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 11899  		and b.pid=:pid";
 11900  	$error="Unable to check if pre-auth is needed";
 .....
 12438  				//now update current patient
 12439  				$sql=$error1=$s='';$placeholders=array();
 12440: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 12441  				$error="Unable to add family group id to patient";
 12442  				$placeholders['family_id']=$encrypt->decrypt($_POST['ninye']);
 .....
 12486  	$sql="select a.first_name, a.middle_name, a.last_name,  a.mobile_phone, a.biz_phone, b.id , b.treatment_plan_id,
 12487  		b.follow_up_date, b.status
 12488: 		from patient_details_a a, follow_ups b  where b.pid=:pid and b.pid=a.pid  order by b.id desc";					
 12489  	$error="Unable to get follows  for single patient";
 12490  	$placeholders['pid']=$_SESSION['pid'];
 .....
 12939  				//now update current patient
 12940  				$sql=$error1=$s='';$placeholders=array();
 12941: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 12942  				$error="Unable to add family group id to patient";
 12943  				$placeholders['family_id']=$id;
 .....
 13031  	$sql=$error=$s='';$placeholders=array();
 13032  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 13033: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 13034  		and b.appointment_date=:appointment_date
 13035  		join users as c on c.id=b.doc_id";
 .....
 13221  	$pre_auth_needed=$smart_needed='';
 13222  	$sql=$error1=$s='';$placeholders=array();
 13223: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b , tplan_procedure c
 13224  			where b.type=a.insurer_id and b.company_covered=a.id and b.pid=c.pid and invoice_id=:invoice_id group by invoice_id";
 13225  	$error="Unable to check if pre-auth is needed";
 .....
 13328  		$insured='NO';
 13329  		$sql=$error=$s='';$placeholders=array();
 13330: 		$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 13331  		$error="Unable to check if the company is insured";
 13332  		$placeholders['pid']=$pid;
 .....
 13880  	$insured='NO';
 13881  	$sql=$error=$s='';$placeholders=array();
 13882: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 13883  	$error="Unable to check if the company is insured";
 13884  	$placeholders['pid']=$pid;
 .....
 14200  					$insured='NO';
 14201  					$sql=$error=$s='';$placeholders=array();
 14202: 					$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 14203  					$error="Unable to check if the company is insured";
 14204  					$placeholders['pid']=$data[3];
 .....
 14333  	$insured='NO';
 14334  	$sql=$error=$s='';$placeholders=array();
 14335: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 14336  	$error="Unable to check if the company is insured";
 14337  	$placeholders['pid']=$data[3];
 .....
 14473  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
 14474  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
 14475: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
 14476  				join users on tplan_procedure.created_by=users.id
 14477: 				join covered_company on patient_details_a.company_covered=covered_company.id 
 14478  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 14479  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
 .....
 14780  		a.prescription_id , a.prescription_number, concat(d.first_name,' ',d.middle_name,' ',d.last_name) as patient_names,
 14781  		d.patient_number,e.dob,a.pay_type,a.quantity, b.drug_type
 14782: 		from drugs b, prescriptions a, users c, patient_details_a as d, patient_details_b as e
 14783  		where b.id=a.drug_id and c.id=a.created_by and a.pid=d.pid and e.pid=a.pid and a.prescription_number=:prescription_number
 14784  		order by a.id asc";
 .....
 14836  	$sql=$error=$s='';$placeholders=array();
 14837  	$sql="SELECT  a.last_name, a.middle_name, a.first_name,  a.patient_number ,b.when_raised
 14838: 			FROM quotation_number_generator b	JOIN patient_details_a a ON a.pid = b.pid AND 
 14839  			b.quotation_number =:quotation_number";
 14840  	$placeholders[':quotation_number']=$_POST['quotation_disp_num'];
 .....
 14908  	//get pt name, insurer
 14909  	$sql=$error=$s='';$placeholders=array();
 14910: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 14911: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 14912  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 14913: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 14914: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 14915: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 14916  			GROUP BY tplan_procedure.invoice_id";
 14917  	$placeholders[':invoice_number']=$_POST['invoice_disp_num'];
 .....
 15051  	//get pt name, insurer
 15052  	$sql=$error=$s='';$placeholders=array();
 15053: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 15054: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 15055  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 15056: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 15057: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 15058: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 15059  			GROUP BY tplan_procedure.invoice_id";
 15060  	$placeholders[':invoice_number']=$_POST['invoice_disp_num'];
 .....
 15177  		if(!$exit_flag and  $_POST['ptype']!='all'){
 15178  			$insurer_id=$encrypt->decrypt($_POST['ptype']);
 15179: 			$insurer = " and patient_details_a.type=:insurer_id ";
 15180  			$placeholders[':insurer_id']=$insurer_id;
 15181  		}
 .....
 15241  					$sql2="select patient_number,a.pid,first_name,middle_name,last_name,mobile_phone, biz_phone, email_address, 
 15242  							email_address_2,b.name as company_covered,c.name as insurer , self as balance
 15243: 							from patient_details_a a 
 15244  							left join covered_company b on a.company_covered=b.id 
 15245  							left join insurance_company c on a.type=c.id join pt_balances d on a.pid=d.pid
 .....
 15508  				$sql2=$error2=$s2='';$placeholders2=array();	
 15509  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
 15510: 						from patient_details_a a $left_join_company join covered_company b 
 15511  						on a.company_covered=b.id $covered_company
 15512  						$left_join_insurer join insurance_company c on a.type=c.id $insurer_criteria
 .....
 15784  						sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) - c.sum_paid  as balance,
 15785  						min(tplan_procedure.date_invoiced) as date_invoiced, users.first_name,users.last_name,users.middle_name,
 15786: 						patient_details_a.first_name,patient_details_a.last_name,patient_details_a.middle_name,	insurance_company.name,
 15787  						covered_company.name ,tplan_procedure.pid , ifnull(c.sum_paid,0) as sum_invoice_paid, dispatch_number,
 15788  						sum( tplan_procedure.authorised_cost ) as sum_authorised_cost
 15789: 						from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid and tplan_procedure.invoice_id > 0
 15790  							
 15791  						join users on users.id=tplan_procedure.created_by $doctor
 15792: 						left join covered_company on patient_details_a.company_covered=covered_company.id $company
 15793: 						left	join insurance_company on patient_details_a.type=insurance_company.id  $insurer
 15794  						left join (select invoice_id,sum(amount) as sum_paid from payments group by invoice_id) as c 
 15795  							on c.invoice_id=tplan_procedure.invoice_id
 .....
 15821  				$sql2=$error2=$s2='';$placeholders2=array();	
 15822  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
 15823: 						from patient_details_a a $left_join_company join covered_company b 
 15824  						on a.company_covered=b.id $covered_company
 15825  						$left_join_insurer join insurance_company c on a.type=c.id $insurer_criteria
 .....
 16109  	//get pt name, insurer
 16110  	$sql=$error=$s='';$placeholders=array();
 16111: 	$sql="SELECT deleted_invoices.invoice_id, min( deleted_invoices.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 16112: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 16113  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 16114: 			FROM deleted_invoices	JOIN patient_details_a ON patient_details_a.pid = deleted_invoices.pid AND deleted_invoices.invoice_number =:invoice_number
 16115: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 16116: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 16117  			GROUP BY deleted_invoices.invoice_id";
 16118  	$placeholders[':invoice_number']=$_POST['invoice_disp_num_deleted'];
 .....
 16487  							//get number of patients under current employer and type who were not swapped
 16488  							$sql=$error=$s='';$placeholders=array();
 16489: 							$sql="select count(pid) from patient_details_a where type=:type and company_covered=:company_covered
 16490  								and pid not in (select old_pid from swapped_patients )";
 16491  							$error="Unable to get number of pts in company covered";
 .....
 16522  								//get number of patients under current employer and type who were not swapped
 16523  								$sql=$error=$s='';$placeholders=array();
 16524: 								$sql="select count(pid) from patient_details_a where type=:type and company_covered=:company_covered
 16525  									and pid not in (select old_pid from swapped_patients )";
 16526  								$error="Unable to get number of pts in company covered";
 .....
 16573  									//get number of patients under current employer and type who were not swapped
 16574  									$sql=$error=$s='';$placeholders=array();
 16575: 									$sql="select count(pid) from patient_details_a where type=:type and company_covered=:company_covered
 16576  										and pid not in (select old_pid from swapped_patients )";
 16577  									$error="Unable to get number of pts in company covered";
 .....
 17711  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 17712  			
 17713: 			//now insert into patient_details_a
 17714  			$sql=$error=$s='';$placeholders=array();
 17715: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 17716  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 17717  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 .....
 17732  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 17733  			
 17734: 			//now insert into patient_details_b
 17735  			$sql=$error=$s='';$placeholders=array();
 17736: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 17737  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 17738  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 .....
 17794  					$var=$encrypt->decrypt("$family_id[$i2]");
 17795  					$sql=$error=$s='';$placeholders=array();
 17796: 					$sql="update patient_details_a set family_id=null, family_title=null where pid=:pid";
 17797  					$error="Unable to remove pt from family group";
 17798  					$placeholders[':pid']=$var;
 .....
 17802  			}
 17803  			
 17804: 			//now update into patient_details_a
 17805  			$sql=$error=$s='';$placeholders=array();
 17806: 			$sql="update patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 17807  					biz_phone=:biz_phone, type=:type,  member_no=:member_no, company_covered=:company_covered, 
 17808  					email_address=:email_address, email_address_2=:email_address_2 where pid=:pid";
 .....
 17821  			$s = insert_sql($sql, $placeholders, $error, $pdo);	
 17822  			
 17823: 			//now update patient_details_b
 17824  			$sql=$error=$s='';$placeholders=array();
 17825: 			$sql="update patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 17826  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship,
 17827  					gender=:gender,	photo_path=:photo_path, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact where pid=:pid";
 .....
 17857  				
 17858  				$sql=$error=$s='';$placeholders=array();
 17859: 				$sql="insert into changed_patient_details set
 17860  						pid=:pid,
 17861  						field_changed='Patient Type',
 .....
 17886  				}
 17887  				$sql=$error=$s='';$placeholders=array();
 17888: 				$sql="insert into changed_patient_details set
 17889  						pid=:pid,
 17890  						field_changed='Company Covered',

C:\wamp\www\clinic\dental\dental_b\index - Copy.php:
  925  						$sql1=$error1=$s1='';$placeholders1=array();
  926  						$sql1="select new_appointment_id, concat(first_name,' ', middle_name,' ', last_name) as names from registered_patient_appointments  as a
  927: 							join patient_details_a as b on a.pid=b.pid and a.id=:id";
  928  						$error1="Unable to check if new  appointment is set for re-appointment";
  929  						$placeholders1[':id']=$appointment_id;
  ...
 1001  				$sql=$error=$s='';$placeholders=array();
 1002  				$sql="select insurance_company.name,covered_company.name 
 1003: 						from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1004: 						left join covered_company on patient_details_a.company_covered=covered_company.id 
 1005  						where pid=:pid";
 1006  				$placeholders['pid']=$pid;
 ....
 1560  			$sql=$error=$s='';$placeholders=array();
 1561  			$sql="select insurance_company.name,covered_company.name 
 1562: 					from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1563: 					left join covered_company on patient_details_a.company_covered=covered_company.id 
 1564  					where pid=:pid";
 1565  			$placeholders['pid']=$pid;
 ....
 3540  			$pre_auth_needed=$smart_needed='';
 3541  			$sql=$error1=$s='';$placeholders=array();
 3542: 			$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 3543  				and b.pid=:pid";
 3544  			$error="Unable to check if pre-auth is needed";
 ....
 5616  					$placeholders[':id']=$encrypt->decrypt($_POST['allocated_patient']);
 5617  				}			
 5618: 				//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 5619  				
 5620  				$error="Error: Unable to edit waiting list";
 ....
 6235  			
 6236  		//	echo "-3157-";
 6237: 			//now insert into patient_details_a
 6238  			$sql=$error=$s='';$placeholders=array();
 6239: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 6240  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 6241  					year=:year, internal_patient=2";
 ....
 6253  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 6254  		//	echo "-3175-";
 6255: 			//now insert into patient_details_b
 6256  			$sql=$error=$s='';$placeholders=array();
 6257: 			$sql="insert into patient_details_b set  when_added=:when_added,
 6258  					 pid=:pid,  referee=:referee";
 6259  			$error="Unable to add patient new patient";
 ....
 6267  				//check if pre-auth or smart is needed for this patient
 6268  				$sql=$error1=$s='';$placeholders=array();
 6269: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 6270  					and b.pid=:pid";
 6271  				$error="Unable to check if pre-auth is needed";
 ....
 6640  			
 6641  		//	echo "-3157-";
 6642: 			//now insert into patient_details_a
 6643  			$sql=$error=$s='';$placeholders=array();
 6644: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 6645  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 6646  					year=:year, internal_patient=1";
 ....
 6658  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 6659  		//	echo "-3175-";
 6660: 			//now insert into patient_details_b
 6661  			$sql=$error=$s='';$placeholders=array();
 6662: 			$sql="insert into patient_details_b set  when_added=:when_added,
 6663  					 pid=:pid,  referee=:referee";
 6664  			$error="Unable to add patient new patient";
 ....
 6673  				//check if pre-auth or smart is needed for this patient
 6674  				$sql=$error1=$s='';$placeholders=array();
 6675: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 6676  					and b.pid=:pid";
 6677  				$error="Unable to check if pre-auth is needed";
 ....
 8094  	//check if pre-auth or smart is needed for this patient
 8095  	$sql=$error1=$s='';$placeholders=array();
 8096: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 8097  		and b.pid=:pid";
 8098  	$error="Unable to check if pre-auth is needed";
 ....
 9484  	$sql=$error=$s='';$placeholders=array();
 9485  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 9486: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 9487  	$placeholders[':appointment_date']=$appointment_date;
 9488  	$error="Unable to get registerd appointments";
 ....
 9950  	$sql=$error=$s='';$placeholders=array();
 9951  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 9952: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 9953  		and b.appointment_date=:appointment_date
 9954  		join users as c on c.id=b.doc_id";
 ....
 10074  	$pre_auth_needed=$smart_needed='';
 10075  	$sql=$error1=$s='';$placeholders=array();
 10076: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 10077  		and b.pid=:pid";
 10078  	$error="Unable to check if pre-auth is needed";
 .....
 10650  				//get patient number will be used to refresh page
 10651  				$sql=$error1=$s='';$placeholders=array();
 10652: 				$sql="select patient_number from patient_details_a where pid=:pid";
 10653  				$error="Unable to get patient number";
 10654  				$placeholders[':pid']=$pid;
 .....
 10693  	$pre_auth_needed=$smart_needed='';
 10694  	$sql=$error1=$s='';$placeholders=array();
 10695: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 10696  		and b.pid=:pid";
 10697  	$error="Unable to check if pre-auth is needed";
 .....
 11582  				//now update current patient
 11583  				$sql=$error1=$s='';$placeholders=array();
 11584: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 11585  				$error="Unable to add family group id to patient";
 11586  				$placeholders['family_id']=$encrypt->decrypt($_POST['ninye']);
 .....
 11630  	$sql="select a.first_name, a.middle_name, a.last_name,  a.mobile_phone, a.biz_phone, b.id , b.treatment_plan_id,
 11631  		b.follow_up_date, b.status
 11632: 		from patient_details_a a, follow_ups b  where b.pid=:pid and b.pid=a.pid  order by b.id desc";					
 11633  	$error="Unable to get follows  for single patient";
 11634  	$placeholders['pid']=$_SESSION['pid'];
 .....
 12083  				//now update current patient
 12084  				$sql=$error1=$s='';$placeholders=array();
 12085: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 12086  				$error="Unable to add family group id to patient";
 12087  				$placeholders['family_id']=$id;
 .....
 12267  	$pre_auth_needed=$smart_needed='';
 12268  	$sql=$error1=$s='';$placeholders=array();
 12269: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b , tplan_procedure c
 12270  			where b.type=a.insurer_id and b.company_covered=a.id and b.pid=c.pid and invoice_id=:invoice_id group by invoice_id";
 12271  	$error="Unable to check if pre-auth is needed";
 .....
 12373  		$insured='NO';
 12374  		$sql=$error=$s='';$placeholders=array();
 12375: 		$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 12376  		$error="Unable to check if the company is insured";
 12377  		$placeholders['pid']=$pid;
 .....
 12923  	$insured='NO';
 12924  	$sql=$error=$s='';$placeholders=array();
 12925: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 12926  	$error="Unable to check if the company is insured";
 12927  	$placeholders['pid']=$pid;
 .....
 13232  					$insured='NO';
 13233  					$sql=$error=$s='';$placeholders=array();
 13234: 					$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 13235  					$error="Unable to check if the company is insured";
 13236  					$placeholders['pid']=$data[3];
 .....
 13365  	$insured='NO';
 13366  	$sql=$error=$s='';$placeholders=array();
 13367: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 13368  	$error="Unable to check if the company is insured";
 13369  	$placeholders['pid']=$data[3];
 .....
 13495  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
 13496  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
 13497: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
 13498  				join users on tplan_procedure.created_by=users.id
 13499: 				join covered_company on patient_details_a.company_covered=covered_company.id 
 13500  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 13501  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
 .....
 13800  		a.prescription_id , a.prescription_number, concat(d.first_name,' ',d.middle_name,' ',d.last_name) as patient_names,
 13801  		d.patient_number,e.dob,a.pay_type
 13802: 		from drugs b, prescriptions a, users c, patient_details_a as d, patient_details_b as e
 13803  		where b.id=a.drug_id and c.id=a.created_by and a.pid=d.pid and e.pid=a.pid and a.prescription_number=:prescription_number
 13804  		order by a.id asc";
 .....
 13852  	$sql=$error=$s='';$placeholders=array();
 13853  	$sql="SELECT  a.last_name, a.middle_name, a.first_name,  a.patient_number ,b.when_raised
 13854: 			FROM quotation_number_generator b	JOIN patient_details_a a ON a.pid = b.pid AND 
 13855  			b.quotation_number =:quotation_number";
 13856  	$placeholders[':quotation_number']=$_POST['quotation_disp_num'];
 .....
 13905  	//get pt name, insurer
 13906  	$sql=$error=$s='';$placeholders=array();
 13907: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 13908: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 13909  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 13910: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 13911: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 13912: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 13913  			GROUP BY tplan_procedure.invoice_id";
 13914  	$placeholders[':invoice_number']=$_POST['invoice_disp_num'];
 .....
 13980  	//get pt name, insurer
 13981  	$sql=$error=$s='';$placeholders=array();
 13982: 	$sql="SELECT deleted_invoices.invoice_id, min( deleted_invoices.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 13983: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 13984  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 13985: 			FROM deleted_invoices	JOIN patient_details_a ON patient_details_a.pid = deleted_invoices.pid AND deleted_invoices.invoice_number =:invoice_number
 13986: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 13987: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 13988  			GROUP BY deleted_invoices.invoice_id";
 13989  	$placeholders[':invoice_number']=$_POST['invoice_disp_num_deleted'];
 .....
 15035  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 15036  			
 15037: 			//now insert into patient_details_a
 15038  			$sql=$error=$s='';$placeholders=array();
 15039: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 15040  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 15041  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 .....
 15056  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 15057  			
 15058: 			//now insert into patient_details_b
 15059  			$sql=$error=$s='';$placeholders=array();
 15060: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 15061  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 15062  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 .....
 15116  					$var=$encrypt->decrypt("$family_id[$i2]");
 15117  					$sql=$error=$s='';$placeholders=array();
 15118: 					$sql="update patient_details_a set family_id=null, family_title=null where pid=:pid";
 15119  					$error="Unable to remove pt from family group";
 15120  					$placeholders[':pid']=$var;
 .....
 15124  			}
 15125  			
 15126: 			//now update into patient_details_a
 15127  			$sql=$error=$s='';$placeholders=array();
 15128: 			$sql="update patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 15129  					biz_phone=:biz_phone, type=:type,  member_no=:member_no, company_covered=:company_covered, 
 15130  					email_address=:email_address, email_address_2=:email_address_2 where pid=:pid";
 .....
 15143  			$s = insert_sql($sql, $placeholders, $error, $pdo);	
 15144  			
 15145: 			//now update patient_details_b
 15146  			$sql=$error=$s='';$placeholders=array();
 15147: 			$sql="update patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 15148  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship,
 15149  					gender=:gender,	photo_path=:photo_path, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact where pid=:pid";

C:\wamp\www\clinic\dental\dental_b\index.php:
  996  						$sql1=$error1=$s1='';$placeholders1=array();
  997  						$sql1="select new_appointment_id, concat(first_name,' ', middle_name,' ', last_name) as names from registered_patient_appointments  as a
  998: 							join patient_details_a as b on a.pid=b.pid and a.id=:id";
  999  						$error1="Unable to check if new  appointment is set for re-appointment";
 1000  						$placeholders1[':id']=$appointment_id;
 ....
 1072  				$sql=$error=$s='';$placeholders=array();
 1073  				$sql="select insurance_company.name,covered_company.name 
 1074: 						from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1075: 						left join covered_company on patient_details_a.company_covered=covered_company.id 
 1076  						where pid=:pid";
 1077  				$placeholders['pid']=$pid;
 ....
 1166  		$sql=$error=$s='';$placeholders=array();
 1167  		$sql="select insurance_company.name,covered_company.name 
 1168: 				from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1169: 				left join covered_company on patient_details_a.company_covered=covered_company.id 
 1170  				where pid=:pid";
 1171  		$placeholders['pid']=$pid;
 ....
 1750  			$sql=$error=$s='';$placeholders=array();
 1751  			$sql="select insurance_company.name,covered_company.name 
 1752: 					from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1753: 					left join covered_company on patient_details_a.company_covered=covered_company.id 
 1754  					where pid=:pid";
 1755  			$placeholders['pid']=$pid;
 ....
 1994  						$sql=$error=$s='';$placeholders=array();
 1995  						$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 1996: 							from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 1997  							and b.appointment_date=:appointment_date
 1998  							join users as c on c.id=b.doc_id";
 ....
 3860  			$pre_auth_needed=$smart_needed='';
 3861  			$sql=$error1=$s='';$placeholders=array();
 3862: 			$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 3863  				and b.pid=:pid";
 3864  			$error="Unable to check if pre-auth is needed";
 ....
 6168  			$_SESSION['tplan_id']='';
 6169  				$sql=$error=$s='';$placeholders=array();
 6170: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 6171  				$error="Unable to get pid";
 6172  				$placeholders[':patient_number']=$encrypt->decrypt($_POST['goto_pt_contact']);
 ....
 6185  			$_SESSION['tplan_id']='';
 6186  				$sql=$error=$s='';$placeholders=array();
 6187: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 6188  				$error="Unable to get pid";
 6189  				$placeholders[':patient_number']=$_POST['goto_pt_contact2'];
 ....
 6202  			$_SESSION['tplan_id']='';
 6203  				$sql=$error=$s='';$placeholders=array();
 6204: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 6205  				$error="Unable to get pid";
 6206  				$placeholders[':patient_number']=$_POST['goto_tdone2'];
 ....
 6219  			$_SESSION['tplan_id']='';
 6220  				$sql=$error=$s='';$placeholders=array();
 6221: 				$sql="select pid from patient_details_a where patient_number=:patient_number";
 6222  				$error="Unable to get pid";
 6223  				$placeholders[':patient_number']=$encrypt->decrypt($_POST['goto_tdone']);
 ....
 6464  					$placeholders[':id']=$encrypt->decrypt($_POST['allocated_patient']);
 6465  				}			
 6466: 				//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 6467  				
 6468  				$error="Error: Unable to edit waiting list";
 ....
 7329  			
 7330  		//	echo "-3157-";
 7331: 			//now insert into patient_details_a
 7332  			$sql=$error=$s='';$placeholders=array();
 7333: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 7334  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 7335  					year=:year, internal_patient=2";
 ....
 7347  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 7348  		//	echo "-3175-";
 7349: 			//now insert into patient_details_b
 7350  			$sql=$error=$s='';$placeholders=array();
 7351: 			$sql="insert into patient_details_b set  when_added=:when_added,
 7352  					 pid=:pid,  referee=:referee";
 7353  			$error="Unable to add patient new patient";
 ....
 7361  				//check if pre-auth or smart is needed for this patient
 7362  				$sql=$error1=$s='';$placeholders=array();
 7363: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 7364  					and b.pid=:pid";
 7365  				$error="Unable to check if pre-auth is needed";
 ....
 7754  			
 7755  		//	echo "-3157-";
 7756: 			//now insert into patient_details_a
 7757  			$sql=$error=$s='';$placeholders=array();
 7758: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 7759  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 7760  					year=:year, internal_patient=1";
 ....
 7772  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 7773  		//	echo "-3175-";
 7774: 			//now insert into patient_details_b
 7775  			$sql=$error=$s='';$placeholders=array();
 7776: 			$sql="insert into patient_details_b set  when_added=:when_added,
 7777  					 pid=:pid,  referee=:referee";
 7778  			$error="Unable to add patient new patient";
 ....
 7787  				//check if pre-auth or smart is needed for this patient
 7788  				$sql=$error1=$s='';$placeholders=array();
 7789: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 7790  					and b.pid=:pid";
 7791  				$error="Unable to check if pre-auth is needed";
 ....
 9461  	//check if pre-auth or smart is needed for this patient
 9462  	$sql=$error1=$s='';$placeholders=array();
 9463: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 9464  		and b.pid=:pid";
 9465  	$error="Unable to check if pre-auth is needed";
 ....
 9663  			//update ptag
 9664  			$sql=$error=$s='';$placeholders=array();
 9665: 			$sql="update patient_details_b set tag=:tag where pid=:pid";
 9666  			$error="Unable to save treatment plan";
 9667  			$placeholders[':pid']=$_SESSION['pid'];;
 ....
 11280  	$sql=$error=$s='';$placeholders=array();
 11281  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 11282: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 11283  	$placeholders[':appointment_date']=$appointment_date;
 11284  	$error="Unable to get registerd appointments";
 .....
 11447  	$sql=$error=$s='';$placeholders=array();
 11448  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 11449: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 11450  	$placeholders[':appointment_date']=$appointment_date;
 11451  	$error="Unable to get registerd appointments";
 .....
 11613  	$sql=$error=$s='';$placeholders=array();
 11614  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 11615: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 11616  	$placeholders[':appointment_date']=$appointment_date;
 11617  	$error="Unable to get registerd appointments";
 .....
 12193  	$sql=$error=$s='';$placeholders=array();
 12194  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 12195: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 12196  		and b.appointment_date=:appointment_date
 12197  		join users as c on c.id=b.doc_id";
 .....
 12437  	$pre_auth_needed=$smart_needed='';
 12438  	$sql=$error1=$s='';$placeholders=array();
 12439: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 12440  		and b.pid=:pid";
 12441  	$error="Unable to check if pre-auth is needed";
 .....
 13018  				//get patient number will be used to refresh page
 13019  				$sql=$error1=$s='';$placeholders=array();
 13020: 				$sql="select patient_number from patient_details_a where pid=:pid";
 13021  				$error="Unable to get patient number";
 13022  				$placeholders[':pid']=$pid;
 .....
 13093  	$pre_auth_needed=$smart_needed='';
 13094  	$sql=$error1=$s='';$placeholders=array();
 13095: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 13096  		and b.pid=:pid";
 13097  	$error="Unable to check if pre-auth is needed";
 .....
 13659  				//now update current patient
 13660  				$sql=$error1=$s='';$placeholders=array();
 13661: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 13662  				$error="Unable to add family group id to patient";
 13663  				$placeholders['family_id']=$encrypt->decrypt($_POST['ninye']);
 .....
 13707  	$sql="select a.first_name, a.middle_name, a.last_name,  a.mobile_phone, a.biz_phone, b.id , b.treatment_plan_id,
 13708  		b.follow_up_date, b.status
 13709: 		from patient_details_a a, follow_ups b  where b.pid=:pid and b.pid=a.pid  order by b.id desc";					
 13710  	$error="Unable to get follows  for single patient";
 13711  	$placeholders['pid']=$_SESSION['pid'];
 .....
 14160  				//now update current patient
 14161  				$sql=$error1=$s='';$placeholders=array();
 14162: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 14163  				$error="Unable to add family group id to patient";
 14164  				$placeholders['family_id']=$id;
 .....
 14333  	$sql=$error=$s='';$placeholders=array();
 14334  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name,b.treatment
 14335: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 14336  		and b.appointment_date=:appointment_date
 14337  		join users as c on c.id=b.doc_id";
 .....
 14402  	$sql=$error=$s='';$placeholders=array();
 14403  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name,b.treatment
 14404: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 14405  		and b.appointment_date=:appointment_date
 14406  		join users as c on c.id=b.doc_id";
 .....
 14620  	$pre_auth_needed=$smart_needed='';
 14621  	$sql=$error1=$s='';$placeholders=array();
 14622: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b , tplan_procedure c
 14623  			where b.type=a.insurer_id and b.company_covered=a.id and b.pid=c.pid and invoice_id=:invoice_id group by invoice_id";
 14624  	$error="Unable to check if pre-auth is needed";
 .....
 14727  		$insured='NO';
 14728  		$sql=$error=$s='';$placeholders=array();
 14729: 		$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 14730  		$error="Unable to check if the company is insured";
 14731  		$placeholders['pid']=$pid;
 .....
 15294  	$insured='NO';
 15295  	$sql=$error=$s='';$placeholders=array();
 15296: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 15297  	$error="Unable to check if the company is insured";
 15298  	$placeholders['pid']=$pid;
 .....
 15630  					$insured='NO';
 15631  					$sql=$error=$s='';$placeholders=array();
 15632: 					$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 15633  					$error="Unable to check if the company is insured";
 15634  					$placeholders['pid']=$data[3];
 .....
 15767  	$insured='NO';
 15768  	$sql=$error=$s='';$placeholders=array();
 15769: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 15770  	$error="Unable to check if the company is insured";
 15771  	$placeholders['pid']=$data[3];
 .....
 15968  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
 15969  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
 15970: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
 15971  				join users on tplan_procedure.created_by=users.id
 15972: 				join covered_company on patient_details_a.company_covered=covered_company.id 
 15973  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 15974  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
 .....
 16423  		a.prescription_id , a.prescription_number, concat(d.first_name,' ',d.middle_name,' ',d.last_name) as patient_names,
 16424  		d.patient_number,e.dob,a.pay_type,a.quantity, b.drug_type
 16425: 		from drugs b, prescriptions a, users c, patient_details_a as d, patient_details_b as e
 16426  		where b.id=a.drug_id and c.id=a.created_by and a.pid=d.pid and e.pid=a.pid and a.prescription_number=:prescription_number
 16427  		order by a.id asc";
 .....
 16479  	$sql=$error=$s='';$placeholders=array();
 16480  	$sql="SELECT  a.last_name, a.middle_name, a.first_name,  a.patient_number ,b.when_raised
 16481: 			FROM quotation_number_generator b	JOIN patient_details_a a ON a.pid = b.pid AND 
 16482  			b.quotation_number =:quotation_number";
 16483  	$placeholders[':quotation_number']=$_POST['quotation_disp_num'];
 .....
 16551  	//get pt name, insurer
 16552  	$sql=$error=$s='';$placeholders=array();
 16553: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 16554: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 16555  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 16556: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 16557: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 16558: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 16559  			GROUP BY tplan_procedure.invoice_id";
 16560  	$placeholders[':invoice_number']=$_POST['invoice_disp_num'];
 .....
 16694  	//get pt name, insurer
 16695  	$sql=$error=$s='';$placeholders=array();
 16696: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 16697: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 16698: 			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed, patient_details_a.type
 16699: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 16700: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 16701: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 16702  			GROUP BY tplan_procedure.invoice_id";
 16703  	$placeholders[':invoice_number']=$_POST['invoice_disp_num'];
 .....
 16844  		if(!$exit_flag and  $_POST['ptype']!='all'){
 16845  			$insurer_id=$encrypt->decrypt($_POST['ptype']);
 16846: 			$insurer = " and patient_details_a.type=:insurer_id ";
 16847  			$placeholders[':insurer_id']=$insurer_id;
 16848  		}
 .....
 16908  					$sql2="select patient_number,a.pid,first_name,middle_name,last_name,mobile_phone, biz_phone, email_address, 
 16909  							email_address_2,b.name as company_covered,c.name as insurer , self as balance
 16910: 							from patient_details_a a 
 16911  							left join covered_company b on a.company_covered=b.id 
 16912  							left join insurance_company c on a.type=c.id join pt_balances d on a.pid=d.pid
 .....
 17175  				$sql2=$error2=$s2='';$placeholders2=array();	
 17176  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
 17177: 						from patient_details_a a $left_join_company join covered_company b 
 17178  						on a.company_covered=b.id $covered_company
 17179  						$left_join_insurer join insurance_company c on a.type=c.id $insurer_criteria
 .....
 17451  						sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) - c.sum_paid  as balance,
 17452  						min(tplan_procedure.date_invoiced) as date_invoiced, users.first_name,users.last_name,users.middle_name,
 17453: 						patient_details_a.first_name,patient_details_a.last_name,patient_details_a.middle_name,	insurance_company.name,
 17454  						covered_company.name ,tplan_procedure.pid , ifnull(c.sum_paid,0) as sum_invoice_paid, dispatch_number,
 17455  						sum( tplan_procedure.authorised_cost ) as sum_authorised_cost
 17456: 						from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid and tplan_procedure.invoice_id > 0
 17457  							
 17458  						join users on users.id=tplan_procedure.created_by $doctor
 17459: 						left join covered_company on patient_details_a.company_covered=covered_company.id $company
 17460: 						left	join insurance_company on patient_details_a.type=insurance_company.id  $insurer
 17461  						left join (select invoice_id,sum(amount) as sum_paid from payments group by invoice_id) as c 
 17462  							on c.invoice_id=tplan_procedure.invoice_id
 .....
 17488  				$sql2=$error2=$s2='';$placeholders2=array();	
 17489  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
 17490: 						from patient_details_a a $left_join_company join covered_company b 
 17491  						on a.company_covered=b.id $covered_company
 17492  						$left_join_insurer join insurance_company c on a.type=c.id $insurer_criteria
 .....
 17776  	//get pt name, insurer
 17777  	$sql=$error=$s='';$placeholders=array();
 17778: 	$sql="SELECT deleted_invoices.invoice_id, min( deleted_invoices.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 17779: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 17780  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 17781: 			FROM deleted_invoices	JOIN patient_details_a ON patient_details_a.pid = deleted_invoices.pid AND deleted_invoices.invoice_number =:invoice_number
 17782: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 17783: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 17784  			GROUP BY deleted_invoices.invoice_id";
 17785  	$placeholders[':invoice_number']=$_POST['invoice_disp_num_deleted'];
 .....
 18179  							//get number of patients under current employer and type who were not swapped
 18180  							$sql=$error=$s='';$placeholders=array();
 18181: 							$sql="select count(pid) from patient_details_a where type=:type and company_covered=:company_covered
 18182  								and pid not in (select old_pid from swapped_patients )";
 18183  							$error="Unable to get number of pts in company covered";
 .....
 18214  								//get number of patients under current employer and type who were not swapped
 18215  								$sql=$error=$s='';$placeholders=array();
 18216: 								$sql="select count(pid) from patient_details_a where type=:type and company_covered=:company_covered
 18217  									and pid not in (select old_pid from swapped_patients )";
 18218  								$error="Unable to get number of pts in company covered";
 .....
 18265  									//get number of patients under current employer and type who were not swapped
 18266  									$sql=$error=$s='';$placeholders=array();
 18267: 									$sql="select count(pid) from patient_details_a where type=:type and company_covered=:company_covered
 18268  										and pid not in (select old_pid from swapped_patients )";
 18269  									$error="Unable to get number of pts in company covered";
 .....
 19494  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 19495  			
 19496: 			//now insert into patient_details_a
 19497  			$sql=$error=$s='';$placeholders=array();
 19498: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 19499  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 19500  					year=:year,email_address=:email_address, email_address_2=:email_address_2, card_issued=:card_issued, added_by=:added_by";
 .....
 19517  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 19518  			
 19519: 			//now insert into patient_details_b
 19520  			$sql=$error=$s='';$placeholders=array();
 19521: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 19522  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 19523  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 .....
 19579  					$var=$encrypt->decrypt("$family_id[$i2]");
 19580  					$sql=$error=$s='';$placeholders=array();
 19581: 					$sql="update patient_details_a set family_id=null, family_title=null where pid=:pid";
 19582  					$error="Unable to remove pt from family group";
 19583  					$placeholders[':pid']=$var;
 .....
 19587  			}
 19588  			
 19589: 			//now update into patient_details_a
 19590  			$sql=$error=$s='';$placeholders=array();
 19591: 			$sql="update patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 19592  					biz_phone=:biz_phone, type=:type,  member_no=:member_no, company_covered=:company_covered, 
 19593  					email_address=:email_address, email_address_2=:email_address_2, card_issued=:card_issued where pid=:pid";
 .....
 19607  			$s = insert_sql($sql, $placeholders, $error, $pdo);	
 19608  			
 19609: 			//now update patient_details_b
 19610  			$sql=$error=$s='';$placeholders=array();
 19611: 			$sql="update patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 19612  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship,
 19613  					gender=:gender,	photo_path=:photo_path, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact where pid=:pid";
 .....
 19643  				
 19644  				$sql=$error=$s='';$placeholders=array();
 19645: 				$sql="insert into changed_patient_details set
 19646  						pid=:pid,
 19647  						field_changed='Patient Type',
 .....
 19672  				}
 19673  				$sql=$error=$s='';$placeholders=array();
 19674: 				$sql="insert into changed_patient_details set
 19675  						pid=:pid,
 19676  						field_changed='Company Covered',

C:\wamp\www\clinic\dental\dental_b\index.php.bk:
 1622  		$sql="select a.when_added, a.lab_id, a.bleach, a.night, a.fluoride, a.mouth, a.description, a.shade, a.crowns, a.bridge, a.ortho,
 1623  		a.post_core, a.full_denture, a.partial_denture, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
 1624: 		c.last_name, d.technician_name from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
 1625  		a.doc_id=c.id  and a.lab_id=:lab_id";
 1626  		
 ....
 2469  		$sql=$error=$s='';$placeholders=array();	
 2470  		if($criteria=="patient_number"){
 2471: 			$sql="select first_name, middle_name, last_name, pid, patient_number from patient_details_a where patient_number=:patient_number";
 2472  			$placeholders[':patient_number']=$search_criteria;
 2473  		}
 2474  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 2475: 			$sql="select first_name, middle_name, last_name, pid, patient_number from patient_details_a where upper($criteria) like :criteria";
 2476  			$placeholders[':criteria']=strtoupper("%$search_criteria%");
 2477  		}
 2478: 		//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 2479  		
 2480  		$error="Error: Unable to get patient details for patient search";
 ....
 2652  					$placeholders[':id']=$encrypt->decrypt($_POST['allocated_patient']);
 2653  				}			
 2654: 				//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 2655  				
 2656  				$error="Error: Unable to edit waiting list";
 ....
 3924  	$sql=$error=$s='';$placeholders=array();
 3925  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 3926: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 3927  	$placeholders[':appointment_date']=$appointment_date;
 3928  	$error="Unable to get registerd appointments";

C:\wamp\www\clinic\dental\dental_b\index_bk.php:
  923  						$sql1=$error1=$s1='';$placeholders1=array();
  924  						$sql1="select new_appointment_id, concat(first_name,' ', middle_name,' ', last_name) as names from registered_patient_appointments  as a
  925: 							join patient_details_a as b on a.pid=b.pid and a.id=:id";
  926  						$error1="Unable to check if new  appointment is set for re-appointment";
  927  						$placeholders1[':id']=$appointment_id;
  ...
  999  				$sql=$error=$s='';$placeholders=array();
 1000  				$sql="select insurance_company.name,covered_company.name 
 1001: 						from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1002: 						left join covered_company on patient_details_a.company_covered=covered_company.id 
 1003  						where pid=:pid";
 1004  				$placeholders['pid']=$pid;
 ....
 1558  			$sql=$error=$s='';$placeholders=array();
 1559  			$sql="select insurance_company.name,covered_company.name 
 1560: 					from patient_details_a left join insurance_company on patient_details_a.type=insurance_company.id  
 1561: 					left join covered_company on patient_details_a.company_covered=covered_company.id 
 1562  					where pid=:pid";
 1563  			$placeholders['pid']=$pid;
 ....
 3538  			$pre_auth_needed=$smart_needed='';
 3539  			$sql=$error1=$s='';$placeholders=array();
 3540: 			$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 3541  				and b.pid=:pid";
 3542  			$error="Unable to check if pre-auth is needed";
 ....
 5597  					$placeholders[':id']=$encrypt->decrypt($_POST['allocated_patient']);
 5598  				}			
 5599: 				//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 5600  				
 5601  				$error="Error: Unable to edit waiting list";
 ....
 6198  			
 6199  		//	echo "-3157-";
 6200: 			//now insert into patient_details_a
 6201  			$sql=$error=$s='';$placeholders=array();
 6202: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 6203  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 6204  					year=:year, internal_patient=2";
 ....
 6216  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 6217  		//	echo "-3175-";
 6218: 			//now insert into patient_details_b
 6219  			$sql=$error=$s='';$placeholders=array();
 6220: 			$sql="insert into patient_details_b set  when_added=:when_added,
 6221  					 pid=:pid,  referee=:referee";
 6222  			$error="Unable to add patient new patient";
 ....
 6230  				//check if pre-auth or smart is needed for this patient
 6231  				$sql=$error1=$s='';$placeholders=array();
 6232: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 6233  					and b.pid=:pid";
 6234  				$error="Unable to check if pre-auth is needed";
 ....
 6603  			
 6604  		//	echo "-3157-";
 6605: 			//now insert into patient_details_a
 6606  			$sql=$error=$s='';$placeholders=array();
 6607: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 6608  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 6609  					year=:year, internal_patient=1";
 ....
 6621  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 6622  		//	echo "-3175-";
 6623: 			//now insert into patient_details_b
 6624  			$sql=$error=$s='';$placeholders=array();
 6625: 			$sql="insert into patient_details_b set  when_added=:when_added,
 6626  					 pid=:pid,  referee=:referee";
 6627  			$error="Unable to add patient new patient";
 ....
 6636  				//check if pre-auth or smart is needed for this patient
 6637  				$sql=$error1=$s='';$placeholders=array();
 6638: 				$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 6639  					and b.pid=:pid";
 6640  				$error="Unable to check if pre-auth is needed";
 ....
 8048  	//check if pre-auth or smart is needed for this patient
 8049  	$sql=$error1=$s='';$placeholders=array();
 8050: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 8051  		and b.pid=:pid";
 8052  	$error="Unable to check if pre-auth is needed";
 ....
 9436  	$sql=$error=$s='';$placeholders=array();
 9437  	$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
 9438: 	from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
 9439  	$placeholders[':appointment_date']=$appointment_date;
 9440  	$error="Unable to get registerd appointments";
 ....
 9902  	$sql=$error=$s='';$placeholders=array();
 9903  	$sql="select a.first_name,a.middle_name,a.last_name, b.shour, b.smin, b.rank ,b.am_pm , c.first_name,c.middle_name,c.last_name
 9904: 		from registered_patient_appointments as b join patient_details_a as a on b.pid=a.pid and b.doc_id=:doc_id
 9905  		and b.appointment_date=:appointment_date
 9906  		join users as c on c.id=b.doc_id";
 ....
 10026  	$pre_auth_needed=$smart_needed='';
 10027  	$sql=$error1=$s='';$placeholders=array();
 10028: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 10029  		and b.pid=:pid";
 10030  	$error="Unable to check if pre-auth is needed";
 .....
 10602  				//get patient number will be used to refresh page
 10603  				$sql=$error1=$s='';$placeholders=array();
 10604: 				$sql="select patient_number from patient_details_a where pid=:pid";
 10605  				$error="Unable to get patient number";
 10606  				$placeholders[':pid']=$pid;
 .....
 10645  	$pre_auth_needed=$smart_needed='';
 10646  	$sql=$error1=$s='';$placeholders=array();
 10647: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
 10648  		and b.pid=:pid";
 10649  	$error="Unable to check if pre-auth is needed";
 .....
 11534  				//now update current patient
 11535  				$sql=$error1=$s='';$placeholders=array();
 11536: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 11537  				$error="Unable to add family group id to patient";
 11538  				$placeholders['family_id']=$encrypt->decrypt($_POST['ninye']);
 .....
 11582  	$sql="select a.first_name, a.middle_name, a.last_name,  a.mobile_phone, a.biz_phone, b.id , b.treatment_plan_id,
 11583  		b.follow_up_date, b.status
 11584: 		from patient_details_a a, follow_ups b  where b.pid=:pid and b.pid=a.pid  order by b.id desc";					
 11585  	$error="Unable to get follows  for single patient";
 11586  	$placeholders['pid']=$_SESSION['pid'];
 .....
 12028  				//now update current patient
 12029  				$sql=$error1=$s='';$placeholders=array();
 12030: 				$sql="update patient_details_a set family_id=:family_id , family_title=:family_title where pid=:pid";
 12031  				$error="Unable to add family group id to patient";
 12032  				$placeholders['family_id']=$id;
 .....
 12212  	$pre_auth_needed=$smart_needed='';
 12213  	$sql=$error1=$s='';$placeholders=array();
 12214: 	$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b , tplan_procedure c
 12215  			where b.type=a.insurer_id and b.company_covered=a.id and b.pid=c.pid and invoice_id=:invoice_id group by invoice_id";
 12216  	$error="Unable to check if pre-auth is needed";
 .....
 12318  		$insured='NO';
 12319  		$sql=$error=$s='';$placeholders=array();
 12320: 		$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 12321  		$error="Unable to check if the company is insured";
 12322  		$placeholders['pid']=$pid;
 .....
 12868  	$insured='NO';
 12869  	$sql=$error=$s='';$placeholders=array();
 12870: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 12871  	$error="Unable to check if the company is insured";
 12872  	$placeholders['pid']=$pid;
 .....
 13177  					$insured='NO';
 13178  					$sql=$error=$s='';$placeholders=array();
 13179: 					$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 13180  					$error="Unable to check if the company is insured";
 13181  					$placeholders['pid']=$data[3];
 .....
 13310  	$insured='NO';
 13311  	$sql=$error=$s='';$placeholders=array();
 13312: 	$sql="select insured from covered_company a, patient_details_a b where b.pid=:pid and b.company_covered=a.id ";
 13313  	$error="Unable to check if the company is insured";
 13314  	$placeholders['pid']=$data[3];
 .....
 13440  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
 13441  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
 13442: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
 13443  				join users on tplan_procedure.created_by=users.id
 13444: 				join covered_company on patient_details_a.company_covered=covered_company.id 
 13445  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 13446  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
 .....
 13745  		a.prescription_id , a.prescription_number, concat(d.first_name,' ',d.middle_name,' ',d.last_name) as patient_names,
 13746  		d.patient_number,e.dob,a.pay_type
 13747: 		from drugs b, prescriptions a, users c, patient_details_a as d, patient_details_b as e
 13748  		where b.id=a.drug_id and c.id=a.created_by and a.pid=d.pid and e.pid=a.pid and a.prescription_number=:prescription_number
 13749  		order by a.id asc";
 .....
 13797  	$sql=$error=$s='';$placeholders=array();
 13798  	$sql="SELECT  a.last_name, a.middle_name, a.first_name,  a.patient_number ,b.when_raised
 13799: 			FROM quotation_number_generator b	JOIN patient_details_a a ON a.pid = b.pid AND 
 13800  			b.quotation_number =:quotation_number";
 13801  	$placeholders[':quotation_number']=$_POST['quotation_disp_num'];
 .....
 13850  	//get pt name, insurer
 13851  	$sql=$error=$s='';$placeholders=array();
 13852: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 13853: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 13854  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 13855: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 13856: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 13857: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 13858  			GROUP BY tplan_procedure.invoice_id";
 13859  	$placeholders[':invoice_number']=$_POST['invoice_disp_num'];
 .....
 13925  	//get pt name, insurer
 13926  	$sql=$error=$s='';$placeholders=array();
 13927: 	$sql="SELECT deleted_invoices.invoice_id, min( deleted_invoices.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 13928: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 13929  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 13930: 			FROM deleted_invoices	JOIN patient_details_a ON patient_details_a.pid = deleted_invoices.pid AND deleted_invoices.invoice_number =:invoice_number
 13931: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 13932: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 13933  			GROUP BY deleted_invoices.invoice_id";
 13934  	$placeholders[':invoice_number']=$_POST['invoice_disp_num_deleted'];
 .....
 14931  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 14932  			
 14933: 			//now insert into patient_details_a
 14934  			$sql=$error=$s='';$placeholders=array();
 14935: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 14936  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 14937  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 .....
 14952  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 14953  			
 14954: 			//now insert into patient_details_b
 14955  			$sql=$error=$s='';$placeholders=array();
 14956: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 14957  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 14958  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 .....
 15012  					$var=$encrypt->decrypt("$family_id[$i2]");
 15013  					$sql=$error=$s='';$placeholders=array();
 15014: 					$sql="update patient_details_a set family_id=null, family_title=null where pid=:pid";
 15015  					$error="Unable to remove pt from family group";
 15016  					$placeholders[':pid']=$var;
 .....
 15020  			}
 15021  			
 15022: 			//now update into patient_details_a
 15023  			$sql=$error=$s='';$placeholders=array();
 15024: 			$sql="update patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 15025  					biz_phone=:biz_phone, type=:type,  member_no=:member_no, company_covered=:company_covered, 
 15026  					email_address=:email_address, email_address_2=:email_address_2 where pid=:pid";
 .....
 15039  			$s = insert_sql($sql, $placeholders, $error, $pdo);	
 15040  			
 15041: 			//now update patient_details_b
 15042  			$sql=$error=$s='';$placeholders=array();
 15043: 			$sql="update patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 15044  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship,
 15045  					gender=:gender,	photo_path=:photo_path, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact where pid=:pid";

C:\wamp\www\clinic\dental\patient-contacts\index.php:
  210  			$year=date('y');
  211  			$sql=$error=$s='';$placeholders=array();
  212: 			$sql="select max(pnum) from patient_details_a where year=:year";
  213  			$error="Unable to get max pnum for year $year";
  214  			$placeholders[':year']="$year";
  ...
  218  			$pid="$pnum/$year";
  219  			
  220: 			//now insert into patient_details_a
  221  			$sql=$error=$s='';$placeholders=array();
  222: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
  223  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
  224  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
  ...
  239  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
  240  			
  241: 			//now insert into patient_details_b
  242  			$sql=$error=$s='';$placeholders=array();
  243: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
  244  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
  245  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
  ...
  290  			
  291  			
  292: 			//now update into patient_details_a
  293  			$sql=$error=$s='';$placeholders=array();
  294: 			$sql="update patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
  295  					biz_phone=:biz_phone, type=:type,  member_no=:member_no, company_covered=:company_covered, 
  296  					email_address=:email_address where pid=:pid";
  ...
  308  			$s = insert_sql($sql, $placeholders, $error, $pdo);	
  309  			
  310: 			//now update patient_details_b
  311  			$sql=$error=$s='';$placeholders=array();
  312: 			$sql="update patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
  313  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship,
  314  					gender=:gender,	photo_path=:photo_path, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact where pid=:pid";
  ...
  634  					//show person who added the record
  635  					$sql2=$error2=$s2='';$placeholders2=array();
  636: 					$sql2="select  a.first_name, a.middle_name, a.last_name from users  a , patient_details_a b where b.pid=:pid and b.added_by=a.id";
  637  					$error2="Unable to pending visits";
  638  					$placeholders2[':pid']=$_SESSION['pid'];

C:\wamp\www\clinic\dental\treatment-done\index - Copy.php:
   57  		$pre_auth_needed=$smart_needed='';
   58  		$sql=$error1=$s='';$placeholders=array();
   59: 		$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
   60  			and b.pid=:pid";
   61  		$error="Unable to check if pre-auth is needed";

C:\wamp\www\clinic\dental\treatment-done\index.php:
   75  		$pre_auth_needed=$smart_needed='';
   76  		$sql=$error1=$s='';$placeholders=array();
   77: 		$sql="select pre_auth_needed, smart_needed from covered_company a, patient_details_a b where b.type=a.insurer_id and b.company_covered=a.id
   78  			and b.pid=:pid";
   79  		$error="Unable to check if pre-auth is needed";

C:\wamp\www\clinic\dental_includes\access.inc - Copy.php:
  160  			//get pid of pts to be swapped
  161  			$sql=$error=$s='';$placeholders=array();
  162: 			$sql="select * from patient_details_a where type=:type and company_covered=:company_covered
  163  				and pid not in (select old_pid from swapped_patients )";
  164  			$error="Unable to get number of pts in company covered";
  ...
  187  	
  188  				$old_patient_number=html($row['patient_number']);
  189: 				//now insert into patient_details_a
  190  				$sql2=$error2=$s2='';$placeholders2=array();
  191: 				$sql2="insert into patient_details_a set last_name=:last_name, 
  192  					middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
  193  						biz_phone=:biz_phone, type=:type, patient_number=:patient_number, 
  ...
  217  				$id = get_insert_id($sql2, $placeholders2, $error2, $pdo);
  218  				
  219: 				//select patient_details_b
  220  				$sql2=$error2=$s2='';$placeholders2=array();
  221: 				$sql2="select * from patient_details_b where pid=:pid";
  222  				$error2="Unable to get patient details 2";
  223  				$placeholders2[':pid']=$row['pid'];
  224  				$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
  225  				foreach($s2 as $row2){
  226: 					//now insert into patient_details_b
  227  					$sql3=$error3=$s3='';$placeholders3=array();
  228: 					$sql3="insert into patient_details_b set id_number=:id_number, address=:address,
  229  						city=:city, occupation=:occupation,weight=:weight, dob=:dob, referee=:referee,
  230  							em_contact=:em_contact,em_relationship=:em_relationship, em_phone=:em_phone,
  ...
  281  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, 
  282  				b.last_name, c.first_name, c.middle_name, c.last_name, d.technician_name 
  283: 				from labs a, patient_details_a b, users c, lab_technicians d 
  284  				where a.pid=:pid and d.id=a.technician and a.pid=b.pid and a.doc_id=c.id and date_returned is null  order by a.lab_id";
  285  		$error="Unable to get work due out";
  ...
  509  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, 
  510  			c.first_name, c.middle_name, c.last_name, d.technician_name, a.date_returned 
  511: 			from labs a, patient_details_a b, users c, lab_technicians d 
  512  			where a.pid=:pid and d.id=a.technician and a.pid=b.pid and a.doc_id=c.id  and  a.date_returned is not null 
  513  			and a.date_lab_given_to_patient is null  order by a.lab_id ";
  ...
  844  		a.post_core, a.full_denture, a.partial_denture, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
  845  		c.last_name, d.technician_name ,b.patient_number
  846: 		from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
  847  		a.doc_id=c.id  and a.lab_id=:lab_id";
  848  		
  ...
 1106  	$sql="select a.when_added, a.receipt_num, a.amount, a.pay_type,a.tx_number,a.balance,b.first_name, b.middle_name, b.last_name,
 1107  			b.patient_number ,c.name, a.points_balance
 1108: 		from payments as a join patient_details_a as b on a.pid=b.pid
 1109  		left join payment_types as c on c.id=a.pay_type
 1110  		where a.id=:id";
 ....
 1178  	//get pt name, insurer
 1179  	$sql=$error=$s='';$placeholders=array();
 1180: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 1181: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 1182  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 1183: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 1184: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 1185: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 1186  			GROUP BY tplan_procedure.invoice_id";
 1187  	$placeholders[':invoice_number']="$invoice_disp_num";
 ....
 1288  	$sql=$error=$s='';$placeholders=array();	
 1289  	if($criteria=="patient_number"){$sql="select a.pid, b.comments, b.significant, b.management from 
 1290: 		patient_details_a a, patient_completion b where a.patient_number=:patient_number and a.pid=b.pid";}
 1291  	elseif($criteria=="pid"){$sql="select * from patient_completion where pid=:patient_number";}
 1292  	$placeholders[':patient_number']="$patient_number";
 ....
 1329   b.stoping, b.lenses, b.bgroup, b.anaethesia, b.Asprin, b.penicilin, b.sedatives, b.sulfa, b.codeine, b.latex, b.iodine,
 1330   b.hay, b.animals, b.food, b.food_specify, b.other, b.other_specify, b.type  from 
 1331: 		patient_details_a a, patient_medical b where a.patient_number=:patient_number and a.pid=b.pid";}
 1332  	elseif($criteria=="pid"){$sql="select * from patient_medical where pid=:patient_number";}
 1333  	$placeholders[':patient_number']="$patient_number";
 ....
 1427  		b.pedo_mesial_occlusal,b.pedo_root_carious,b.pedo_cervical,b.pedo_crown,b.pedo_implant,b.pedo_denture,b.pedo_bridge,b.pedo_root_canal,
 1428  		b.pedo_amalgam,b.pedo_composite from 
 1429: 		patient_details_a a, on_examination b where a.patient_number=:patient_number and a.pid=b.pid";}
 1430  	elseif($criteria=="pid"){$sql="select * from on_examination where pid=:patient_number";}
 1431  	$placeholders[':patient_number']="$patient_number";
 ....
 1513  	if($criteria=="patient_number"){$sql="select a.pid, b.gums_bleed, b.sensitive_teeth, b.periodontal, b.braces, b.aches, b.removeable,
 1514  	b.prev_ye_no, b.prev, b.curr, b.last_dental, b.last_xray, b.done1, b.appearance, b.when_added, from 
 1515: 		patient_details_a a, patient_dental b where a.patient_number=:patient_number and a.pid=b.pid";}
 1516  	elseif($criteria=="pid"){$sql="select * from patient_dental where pid=:patient_number";}
 1517  	$placeholders[':patient_number']="$patient_number";
 ....
 1543  	if($criteria=="patient_number"){$sql="select a.pid, b.when_added, b.pregnant,b.nursing,b.control,
 1544  	b.pjoint,b.pwhen,b.complication,b.antibiotics,b.dose,b.pname,b.pphone from 
 1545: 		patient_details_a a, patient_women b where a.patient_number=:patient_number and a.pid=b.pid";}
 1546  	elseif($criteria=="pid"){$sql="select * from patient_women where pid=:patient_number";}
 1547  	$placeholders[':patient_number']="$patient_number";
 ....
 1581    mental,   mspecify ,   neuro,   nspecify ,   osteoporosis,   swollen,   rproblems,   emphysema ,   headaches,   wloss,   std,   sinus,   sleep, 
 1582    sores,   stroke,   systematic,   thyroid,   tb,   ulcers,   urination,   other text,    when_added,   other_yes_no from 
 1583: 		patient_details_a a, patient_disease b where a.patient_number=:patient_number and a.pid=b.pid";}
 1584  	elseif($criteria=="pid"){$sql="select * from patient_disease where pid=:patient_number";}
 1585  	$placeholders[':patient_number']="$patient_number";
 ....
 1713  			$sql2=$error2=$s2='';$placeholders2=array();
 1714  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1715: 				from patient_details_a a, patient_relationships b 
 1716  				where family_id=:family_id and a.family_title=b.id";
 1717  			$error2="Unable to get  family group memebers";
 ....
 1795  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
 1796  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
 1797: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
 1798  				join users on tplan_procedure.created_by=users.id
 1799: 				join covered_company on patient_details_a.company_covered=covered_company.id 
 1800  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 1801  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
 ....
 1915  	//get family name
 1916  	$sql=$error1=$s='';$placeholders=array();
 1917: 	$sql="select a.name,a.id from family_group a, patient_details_a b where b.pid=:pid and a.id=b.family_id";
 1918  	$error="Unable to get pt family name";
 1919  	$placeholders['pid']=$pid;
 ....
 1927  			$sql2=$error2=$s2='';$placeholders2=array();
 1928  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1929: 				from patient_details_a a, patient_relationships b 
 1930  				where family_id=:family_id and a.family_title=b.id";
 1931  			$error2="Unable to get  family group memebers";
 ....
 1963  	//get family name
 1964  	$sql=$error1=$s='';$placeholders=array();
 1965: 	$sql="select a.name,a.id from family_group a, patient_details_a b where b.pid=:pid and a.id=b.family_id";
 1966  	$error="Unable to get pt family name";
 1967  	$placeholders['pid']=$pid;
 ....
 1975  			$sql2=$error2=$s2='';$placeholders2=array();
 1976  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1977: 				from patient_details_a a, patient_relationships b 
 1978  				where family_id=:family_id and a.family_title=b.id";
 1979  			$error2="Unable to get  family group memebers";
 ....
 2003  	//get patient details a
 2004  	$sql=$error=$s='';$placeholders=array();	
 2005: 	if($criteria=="patient_number"){$sql="select * from patient_details_a where patient_number=:patient_number and internal_patient=0";}
 2006: 	elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number and internal_patient=0";}
 2007: 	elseif($criteria=="mobile_number"){$sql="select * from patient_details_a where mobile_phone=:patient_number and internal_patient=0";}	
 2008: 	elseif($criteria=="business_number"){$sql="select * from patient_details_a where biz_phone=:patient_number and internal_patient=0";}	
 2009  	$placeholders[':patient_number']="$patient_number";
 2010  	$error="Error: Unable to get patient details a";
 ....
 2117  	//get patient details b
 2118  	$sql=$error=$s='';$placeholders=array();		
 2119: 	$sql="select * from patient_details_b where pid=:pid";
 2120  	$placeholders[':pid']=$_SESSION['pid'];
 2121  	$error="Error: Unable to get patient details b";
 ....
 2262  		
 2263  		$sql2=$error2=$s2='';$placeholders2=array();	
 2264: 		$sql2="select a.pid	from patient_details_a a";
 2265  		$error2="Error: Unable to pt details from uniq ";
 2266  		$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
 ....
 2353  	//get credit transfered
 2354  	$sql=$error=$s='';$placeholders=array();
 2355: 	$sql="select a.first_name, a.middle_name, a.last_name , b.amount, b.when_added from patient_details_a a, credit_transfer b where
 2356  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 2357  	$placeholders[':pid']=$pid;
 ....
 2944  			//GET DONORS NAME
 2945  			$sql2=$error2=$s2='';$placeholders2=array();
 2946: 			$sql2="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 2947  			$placeholders2[':pid']=$row['tx_number'];
 2948  			$error2="Error: Unable to get donor patient details ";
 ....
 3015  	//get credit transfered
 3016  	$sql=$error=$s='';$placeholders=array();
 3017: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 3018  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 3019  	$placeholders[':pid']=$pid;
 ....
 3086  							if($payment_type=='Credit Transfer'){
 3087  								//GET DONORS NAME
 3088: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 3089  								$placeholders[':pid']=$data[1];
 3090  								$error="Error: Unable to get donor patient details ";
 ....
 3198  		//get the patients names
 3199  		$sql=$error=$s='';$placeholders=array();
 3200: 		$sql="select first_name,middle_name,last_name, patient_number from patient_details_a where pid=:pid ";
 3201  		$placeholders[':pid']=$pid_clean;
 3202  		$error="Unable to get patient names for patient";
 ....
 3321  		//get the patients names
 3322  		$sql=$error=$s='';$placeholders=array();
 3323: 		$sql="select first_name,middle_name,last_name, patient_number from patient_details_a where pid=:pid ";
 3324  		$placeholders[':pid']=$pid_clean;
 3325  		$error="Unable to get patient names for patient";
 ....
 3513  	//get credit transfered
 3514  	$sql=$error=$s='';$placeholders=array();
 3515: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 3516  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 3517  	$placeholders[':pid']=$pid;
 ....
 3592  							if($payment_type=='Credit Transfer'){
 3593  								//GET DONORS NAME
 3594: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 3595  								$placeholders[':pid']=$data[1];
 3596  								$error="Error: Unable to get donor patient details ";
 ....
 3702  //this will show the basic patient details without the option to search afresh
 3703  function get_patient_basics($pdo,$pid,$encrypt){
 3704: 			$sql="select * from patient_details_a where pid=:pid";
 3705  			$placeholders[':pid']=$pid;
 3706  			$error="Error: Unable to get patient details ";
 ....
 3969  		$sql=$error=$s='';$placeholders=array();	
 3970  		if($criteria=="patient_number"){
 3971: 			$sql="select first_name, middle_name, last_name, pid, patient_number,b.name from patient_details_a a left join 
 3972  				insurance_company b on a.type=b.id where patient_number=:patient_number and internal_patient=0 ";
 3973  			$placeholders[':patient_number']=$search_criteria;
 3974  		}
 3975  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3976: 			$sql="select first_name, middle_name, last_name, pid, patient_number , b.name from patient_details_a a
 3977  				left join insurance_company b on a.type=b.id where upper($criteria) like :criteria  and internal_patient=0 ";
 3978  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 3979  		}
 3980: 		//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 3981  		
 3982  		$error="Error: Unable to get patient details for patient search";
 ....
 4036  		}
 4037  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 4038: 			$sql="select a.id,a.name from patient_details_a b, family_group a  where a.id=b.family_id and upper($criteria) like :criteria";
 4039  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 4040  		}
 4041  		elseif($criteria=="patient_number"){
 4042: 			$sql="select a.id, a.name from patient_details_a b, family_group a  where a.id=b.family_id and a.patient_number=:patient_number";
 4043  			$placeholders[':patient_number']=$search_criteria;
 4044  		}
 ....
 4075  		$sql=$error=$s='';$placeholders=array();
 4076  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 4077: 			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name from patient_details_a a left join
 4078  				insurance_company b on a.type=b.id 	where upper($criteria) like :criteria and internal_patient=0 order by pid desc";
 4079  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 4121  		$sql=$error=$s='';$placeholders=array();
 4122  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 4123: 			$sql="select first_name, middle_name, last_name, patient_number, pid, b.name from patient_details_a a left join
 4124  				insurance_company b on a.type=b.id where upper($criteria) like :criteria  order by pid desc";
 4125  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 4168  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 4169  			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name 
 4170: 				from patient_details_a a left join 	insurance_company b on a.type=b.id 
 4171  				where upper($criteria) like :criteria and internal_patient=0 order by pid desc";
 4172  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 4260  		$sql=$error=$s='';$placeholders=array();
 4261  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 4262: 			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name from patient_details_a a left join
 4263  				insurance_company b on a.type=b.id where internal_patient=0 and upper($criteria) like :criteria order by pid desc";
 4264  			$placeholders[':criteria']=strtoupper("$search_criteria%");

C:\wamp\www\clinic\dental_includes\access.inc.php:
  160  			//get pid of pts to be swapped
  161  			$sql=$error=$s='';$placeholders=array();
  162: 			$sql="select * from patient_details_a where type=:type and company_covered=:company_covered
  163  				and pid not in (select old_pid from swapped_patients )";
  164  			$error="Unable to get number of pts in company covered";
  ...
  187  	
  188  				$old_patient_number=html($row['patient_number']);
  189: 				//now insert into patient_details_a
  190  				$sql2=$error2=$s2='';$placeholders2=array();
  191: 				$sql2="insert into patient_details_a set last_name=:last_name, 
  192  					middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
  193  						biz_phone=:biz_phone, type=:type, patient_number=:patient_number, 
  ...
  217  				$id = get_insert_id($sql2, $placeholders2, $error2, $pdo);
  218  				
  219: 				//select patient_details_b
  220  				$sql2=$error2=$s2='';$placeholders2=array();
  221: 				$sql2="select * from patient_details_b where pid=:pid";
  222  				$error2="Unable to get patient details 2";
  223  				$placeholders2[':pid']=$row['pid'];
  224  				$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
  225  				foreach($s2 as $row2){
  226: 					//now insert into patient_details_b
  227  					$sql3=$error3=$s3='';$placeholders3=array();
  228: 					$sql3="insert into patient_details_b set id_number=:id_number, address=:address,
  229  						city=:city, occupation=:occupation,weight=:weight, dob=:dob, referee=:referee,
  230  							em_contact=:em_contact,em_relationship=:em_relationship, em_phone=:em_phone,
  ...
  281  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, 
  282  				b.last_name, c.first_name, c.middle_name, c.last_name, d.technician_name 
  283: 				from labs a, patient_details_a b, users c, lab_technicians d 
  284  				where a.pid=:pid and d.id=a.technician and a.pid=b.pid and a.doc_id=c.id and date_returned is null  order by a.lab_id";
  285  		$error="Unable to get work due out";
  ...
  509  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, 
  510  			c.first_name, c.middle_name, c.last_name, d.technician_name, a.date_returned 
  511: 			from labs a, patient_details_a b, users c, lab_technicians d 
  512  			where a.pid=:pid and d.id=a.technician and a.pid=b.pid and a.doc_id=c.id  and  a.date_returned is not null 
  513  			and a.date_lab_given_to_patient is null  order by a.lab_id ";
  ...
  844  		a.post_core, a.full_denture, a.partial_denture, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
  845  		c.last_name, d.technician_name ,b.patient_number
  846: 		from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
  847  		a.doc_id=c.id  and a.lab_id=:lab_id";
  848  		
  ...
 1110  	$sql="select a.when_added, a.receipt_num, a.amount, a.pay_type,a.tx_number,a.balance,b.first_name, b.middle_name, b.last_name,
 1111  			b.patient_number ,c.name, a.points_balance
 1112: 		from payments as a join patient_details_a as b on a.pid=b.pid
 1113  		left join payment_types as c on c.id=a.pay_type
 1114  		where a.id=:id";
 ....
 1182  	//get pt name, insurer
 1183  	$sql=$error=$s='';$placeholders=array();
 1184: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
 1185: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
 1186  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
 1187: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
 1188: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
 1189: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
 1190  			GROUP BY tplan_procedure.invoice_id";
 1191  	$placeholders[':invoice_number']="$invoice_disp_num";
 ....
 1292  	$sql=$error=$s='';$placeholders=array();	
 1293  	if($criteria=="patient_number"){$sql="select a.pid, b.comments, b.significant, b.management from 
 1294: 		patient_details_a a, patient_completion b where a.patient_number=:patient_number and a.pid=b.pid";}
 1295  	elseif($criteria=="pid"){$sql="select * from patient_completion where pid=:patient_number";}
 1296  	$placeholders[':patient_number']="$patient_number";
 ....
 1333   b.stoping, b.lenses, b.bgroup, b.anaethesia, b.Asprin, b.penicilin, b.sedatives, b.sulfa, b.codeine, b.latex, b.iodine,
 1334   b.hay, b.animals, b.food, b.food_specify, b.other, b.other_specify, b.type  from 
 1335: 		patient_details_a a, patient_medical b where a.patient_number=:patient_number and a.pid=b.pid";}
 1336  	elseif($criteria=="pid"){$sql="select * from patient_medical where pid=:patient_number";}
 1337  	$placeholders[':patient_number']="$patient_number";
 ....
 1431  		b.pedo_mesial_occlusal,b.pedo_root_carious,b.pedo_cervical,b.pedo_crown,b.pedo_implant,b.pedo_denture,b.pedo_bridge,b.pedo_root_canal,
 1432  		b.pedo_amalgam,b.pedo_composite from 
 1433: 		patient_details_a a, on_examination b where a.patient_number=:patient_number and a.pid=b.pid";}
 1434  	elseif($criteria=="pid"){$sql="select * from on_examination where pid=:patient_number";}
 1435  	$placeholders[':patient_number']="$patient_number";
 ....
 1517  	if($criteria=="patient_number"){$sql="select a.pid, b.gums_bleed, b.sensitive_teeth, b.periodontal, b.braces, b.aches, b.removeable,
 1518  	b.prev_ye_no, b.prev, b.curr, b.last_dental, b.last_xray, b.done1, b.appearance, b.when_added, from 
 1519: 		patient_details_a a, patient_dental b where a.patient_number=:patient_number and a.pid=b.pid";}
 1520  	elseif($criteria=="pid"){$sql="select * from patient_dental where pid=:patient_number";}
 1521  	$placeholders[':patient_number']="$patient_number";
 ....
 1547  	if($criteria=="patient_number"){$sql="select a.pid, b.when_added, b.pregnant,b.nursing,b.control,
 1548  	b.pjoint,b.pwhen,b.complication,b.antibiotics,b.dose,b.pname,b.pphone from 
 1549: 		patient_details_a a, patient_women b where a.patient_number=:patient_number and a.pid=b.pid";}
 1550  	elseif($criteria=="pid"){$sql="select * from patient_women where pid=:patient_number";}
 1551  	$placeholders[':patient_number']="$patient_number";
 ....
 1585    mental,   mspecify ,   neuro,   nspecify ,   osteoporosis,   swollen,   rproblems,   emphysema ,   headaches,   wloss,   std,   sinus,   sleep, 
 1586    sores,   stroke,   systematic,   thyroid,   tb,   ulcers,   urination,   other text,    when_added,   other_yes_no from 
 1587: 		patient_details_a a, patient_disease b where a.patient_number=:patient_number and a.pid=b.pid";}
 1588  	elseif($criteria=="pid"){$sql="select * from patient_disease where pid=:patient_number";}
 1589  	$placeholders[':patient_number']="$patient_number";
 ....
 1717  			$sql2=$error2=$s2='';$placeholders2=array();
 1718  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1719: 				from patient_details_a a, patient_relationships b 
 1720  				where family_id=:family_id and a.family_title=b.id";
 1721  			$error2="Unable to get  family group memebers";
 ....
 1791  	//get patient names and number
 1792  	/*$sql2=$error2=$s2='';$placeholders2=array();
 1793: 	$sql2="select first_name, middle_name, last_name, patient_number from patient_details_A
 1794  		  where pid=:pid ";
 1795  	$placeholders2[':pid']=$pid;
 ....
 1803  		//get the patients names
 1804  		$sql=$error=$s='';$placeholders=array();
 1805: 		$sql="select first_name,middle_name,last_name, patient_number, b.name as ptype, c.name as corporate from patient_details_a a left join insurance_company b on a.type=b.id left join covered_company c on a.company_covered = c.id where pid=:pid ";
 1806  		$placeholders[':pid']=$pid;
 1807  		$error="Unable to get patient names for patient";
 ....
 1826  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
 1827  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
 1828: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
 1829  				join users on tplan_procedure.created_by=users.id
 1830: 				join covered_company on patient_details_a.company_covered=covered_company.id 
 1831  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 1832  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
 ....
 2045  	//get family name
 2046  	$sql=$error1=$s='';$placeholders=array();
 2047: 	$sql="select a.name,a.id from family_group a, patient_details_a b where b.pid=:pid and a.id=b.family_id";
 2048  	$error="Unable to get pt family name";
 2049  	$placeholders['pid']=$pid;
 ....
 2057  			$sql2=$error2=$s2='';$placeholders2=array();
 2058  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 2059: 				from patient_details_a a, patient_relationships b 
 2060  				where family_id=:family_id and a.family_title=b.id";
 2061  			$error2="Unable to get  family group memebers";
 ....
 2093  	//get family name
 2094  	$sql=$error1=$s='';$placeholders=array();
 2095: 	$sql="select a.name,a.id from family_group a, patient_details_a b where b.pid=:pid and a.id=b.family_id";
 2096  	$error="Unable to get pt family name";
 2097  	$placeholders['pid']=$pid;
 ....
 2105  			$sql2=$error2=$s2='';$placeholders2=array();
 2106  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 2107: 				from patient_details_a a, patient_relationships b 
 2108  				where family_id=:family_id and a.family_title=b.id";
 2109  			$error2="Unable to get  family group memebers";
 ....
 2133  	//get patient details a
 2134  	$sql=$error=$s='';$placeholders=array();	
 2135: 	if($criteria=="patient_number"){$sql="select * from patient_details_a where patient_number=:patient_number and internal_patient=0";}
 2136: 	elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number and internal_patient=0";}
 2137: 	elseif($criteria=="mobile_number"){$sql="select * from patient_details_a where mobile_phone=:patient_number and internal_patient=0";}	
 2138: 	elseif($criteria=="business_number"){$sql="select * from patient_details_a where biz_phone=:patient_number and internal_patient=0";}	
 2139  	$placeholders[':patient_number']="$patient_number";
 2140  	$error="Error: Unable to get patient details a";
 ....
 2248  	//get patient details b
 2249  	$sql=$error=$s='';$placeholders=array();		
 2250: 	$sql="select * from patient_details_b where pid=:pid";
 2251  	$placeholders[':pid']=$_SESSION['pid'];
 2252  	$error="Error: Unable to get patient details b";
 ....
 2394  		
 2395  		$sql2=$error2=$s2='';$placeholders2=array();	
 2396: 		$sql2="select a.pid	from patient_details_a a";
 2397  		$error2="Error: Unable to pt details from uniq ";
 2398  		$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
 ....
 2518  	//get credit transfered
 2519  	$sql=$error=$s='';$placeholders=array();
 2520: 	$sql="select a.first_name, a.middle_name, a.last_name , b.amount, b.when_added from patient_details_a a, credit_transfer b where
 2521  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 2522  	$placeholders[':pid']=$pid;
 ....
 3147  		$pre_auth_yes = " and covered_company.pre_auth_needed='YES' ";
 3148  		$sql=$error=$s='';$placeholders=array();
 3149: 		$sql=  "select patient_details_a.type ,tplan_procedure.invoice_id
 3150: 			from patient_details_a join tplan_procedure    on patient_details_a.pid=tplan_procedure.pid 
 3151: 			join insurance_company on insurance_company.id=patient_details_a.type 
 3152: 			join covered_company on patient_details_a.company_covered=covered_company.id $pre_auth_yes
 3153  			join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
 3154  			
 ....
 3158  			$pre_sent_unreceived  
 3159  			  
 3160: 			group by tplan_procedure.invoice_id  order by patient_details_a.type";
 3161  			
 3162  			
 ....
 3336  			//GET DONORS NAME
 3337  			$sql2=$error2=$s2='';$placeholders2=array();
 3338: 			$sql2="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 3339  			$placeholders2[':pid']=$row['tx_number'];
 3340  			$error2="Error: Unable to get donor patient details ";
 ....
 3407  	//get credit transfered
 3408  	$sql=$error=$s='';$placeholders=array();
 3409: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 3410  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 3411  	$placeholders[':pid']=$pid;
 ....
 3478  							if($payment_type=='Credit Transfer'){
 3479  								//GET DONORS NAME
 3480: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 3481  								$placeholders[':pid']=$data[1];
 3482  								$error="Error: Unable to get donor patient details ";
 ....
 3590  		//get the patients names
 3591  		/*$sql=$error=$s='';$placeholders=array();
 3592: 		$sql="select first_name,middle_name,last_name, patient_number, b.name as ptype, c.name as corporate from patient_details_a where pid=:pid ";
 3593  		$placeholders[':pid']=$pid_clean;
 3594  		$error="Unable to get patient names for patient";
 ....
 3607  					//get the patients names
 3608  		$sql=$error=$s='';$placeholders=array();
 3609: 		$sql="select first_name,middle_name,last_name, patient_number, b.name as ptype, c.name as corporate from patient_details_a a left join insurance_company b on a.type=b.id left join covered_company c on a.company_covered = c.id where pid=:pid ";
 3610  		$placeholders[':pid']=$pid_clean;
 3611  		$error="Unable to get patient names for patient";
 ....
 3744  		/*//get the patients names
 3745  		$sql=$error=$s='';$placeholders=array();
 3746: 		$sql="select first_name,middle_name,last_name, patient_number, b.name as ptype, c.name as corporate from patient_details_a a left join insurance_company b on a.type=b.id left join covered_company c on a.company_covered = c.id where pid=:pid ";
 3747  		$placeholders[':pid']=$pid_clean;
 3748  		$error="Unable to get patient names for patient";
 ....
 3850  		//get the patients names
 3851  		$sql=$error=$s='';$placeholders=array();
 3852: 		$sql="select first_name,middle_name,last_name, patient_number, b.name as ptype, c.name as corporate from patient_details_a a left join insurance_company b on a.type=b.id left join covered_company c on a.company_covered = c.id where pid=:pid ";
 3853  		$placeholders[':pid']=$pid_clean;
 3854  		$error="Unable to get patient names for patient";
 ....
 4041  	//get credit transfered
 4042  	$sql=$error=$s='';$placeholders=array();
 4043: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 4044  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 4045  	$placeholders[':pid']=$pid;
 ....
 4087  		$sql=$error=$s='';$placeholders=array();
 4088  		$sql= "SELECT first_name, middle_name, last_name , patient_number, b.name as ptype, c.name as corporate from 
 4089: 		patient_details_a a   left join insurance_company b on a.type=b.id left join covered_company c on a.company_covered = c.id
 4090  		where pid=:pid ";
 4091  		$placeholders[':pid']=$pid;
 ....
 4133  							if($payment_type=='Credit Transfer'){
 4134  								//GET DONORS NAME
 4135: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 4136  								$placeholders[':pid']=$data[1];
 4137  								$error="Error: Unable to get donor patient details ";
 ....
 4364  	//get credit transfered
 4365  	$sql=$error=$s='';$placeholders=array();
 4366: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 4367  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 4368  	$placeholders[':pid']=$pid;
 ....
 4410  		$sql=$error=$s='';$placeholders=array();
 4411  		$sql= "SELECT first_name, middle_name, last_name , patient_number, b.name as ptype, c.name as corporate from 
 4412: 		patient_details_a a   left join insurance_company b on a.type=b.id left join covered_company c on a.company_covered = c.id
 4413  		where pid=:pid ";
 4414  		$placeholders[':pid']=$pid;
 ....
 4466  							if($payment_type=='Credit Transfer'){
 4467  								//GET DONORS NAME
 4468: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 4469  								$placeholders[':pid']=$data[1];
 4470  								$error="Error: Unable to get donor patient details ";
 ....
 4652  //this will show the basic patient details without the option to search afresh
 4653  function get_patient_basics($pdo,$pid,$encrypt){
 4654: 			$sql="select * from patient_details_a where pid=:pid";
 4655  			$placeholders[':pid']=$pid;
 4656  			$error="Error: Unable to get patient details ";
 ....
 4937  		$sql=$error=$s='';$placeholders=array();	
 4938  		if($criteria=="patient_number"){
 4939: 			$sql="select first_name, middle_name, last_name, pid, patient_number,b.name from patient_details_a a left join 
 4940  				insurance_company b on a.type=b.id where patient_number=:patient_number and internal_patient=0 ";
 4941  			$placeholders[':patient_number']=$search_criteria;
 4942  		}
 4943  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 4944: 			$sql="select first_name, middle_name, last_name, pid, patient_number , b.name from patient_details_a a
 4945  				left join insurance_company b on a.type=b.id where upper($criteria) like :criteria  and internal_patient=0 ";
 4946  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 4947  		}
 4948: 		//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 4949  		
 4950  		$error="Error: Unable to get patient details for patient search";
 ....
 5004  		}
 5005  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 5006: 			$sql="select a.id,a.name from patient_details_a b, family_group a  where a.id=b.family_id and upper($criteria) like :criteria";
 5007  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 5008  		}
 5009  		elseif($criteria=="patient_number"){
 5010: 			$sql="select a.id, a.name from patient_details_a b, family_group a  where a.id=b.family_id and a.patient_number=:patient_number";
 5011  			$placeholders[':patient_number']=$search_criteria;
 5012  		}
 ....
 5043  		$sql=$error=$s='';$placeholders=array();
 5044  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 5045: 			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name from patient_details_a a left join
 5046  				insurance_company b on a.type=b.id 	where upper($criteria) like :criteria and internal_patient=0 order by pid desc";
 5047  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 5089  		$sql=$error=$s='';$placeholders=array();
 5090  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 5091: 			$sql="select first_name, middle_name, last_name, patient_number, pid, b.name from patient_details_a a left join
 5092  				insurance_company b on a.type=b.id where upper($criteria) like :criteria  order by pid desc";
 5093  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 5136  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 5137  			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name 
 5138: 				from patient_details_a a left join 	insurance_company b on a.type=b.id 
 5139  				where upper($criteria) like :criteria and internal_patient=0 order by pid desc";
 5140  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 5228  		$sql=$error=$s='';$placeholders=array();
 5229  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 5230: 			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name from patient_details_a a left join
 5231  				insurance_company b on a.type=b.id where internal_patient=0 and upper($criteria) like :criteria order by pid desc";
 5232  			$placeholders[':criteria']=strtoupper("$search_criteria%");

C:\wamp\www\clinic\dental_includes\access.inc_bk.php:
  162  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, 
  163  				b.last_name, c.first_name, c.middle_name, c.last_name, d.technician_name 
  164: 				from labs a, patient_details_a b, users c, lab_technicians d 
  165  				where a.pid=:pid and d.id=a.technician and a.pid=b.pid and a.doc_id=c.id and date_returned is null  order by a.lab_id";
  166  		$error="Unable to get work due out";
  ...
  219  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, 
  220  			c.first_name, c.middle_name, c.last_name, d.technician_name, a.date_returned 
  221: 			from labs a, patient_details_a b, users c, lab_technicians d 
  222  			where a.pid=:pid and d.id=a.technician and a.pid=b.pid and a.doc_id=c.id  and  a.date_returned is not null 
  223  			and a.date_lab_given_to_patient is null  order by a.lab_id ";
  ...
  554  		a.post_core, a.full_denture, a.partial_denture, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
  555  		c.last_name, d.technician_name ,b.patient_number
  556: 		from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
  557  		a.doc_id=c.id  and a.lab_id=:lab_id";
  558  		
  ...
  816  	$sql="select a.when_added, a.receipt_num, a.amount, a.pay_type,a.tx_number,a.balance,b.first_name, b.middle_name, b.last_name,
  817  			b.patient_number ,c.name, a.points_balance
  818: 		from payments as a join patient_details_a as b on a.pid=b.pid
  819  		left join payment_types as c on c.id=a.pay_type
  820  		where a.id=:id";
  ...
  888  	//get pt name, insurer
  889  	$sql=$error=$s='';$placeholders=array();
  890: 	$sql="SELECT tplan_procedure.invoice_id, min( tplan_procedure.date_invoiced ) , patient_details_a.last_name, patient_details_a.middle_name, 
  891: 			patient_details_a.first_name, insurance_company.name, patient_details_a.member_no, patient_details_a.patient_number, 
  892  			covered_company.name, covered_company.pre_auth_needed, covered_company.smart_needed
  893: 			FROM tplan_procedure	JOIN patient_details_a ON patient_details_a.pid = tplan_procedure.pid AND tplan_procedure.invoice_number =:invoice_number
  894: 			left JOIN insurance_company ON insurance_company.id = patient_details_a.type
  895: 			left JOIN covered_company ON patient_details_a.company_covered = covered_company.id
  896  			GROUP BY tplan_procedure.invoice_id";
  897  	$placeholders[':invoice_number']="$invoice_disp_num";
  ...
  998  	$sql=$error=$s='';$placeholders=array();	
  999  	if($criteria=="patient_number"){$sql="select a.pid, b.comments, b.significant, b.management from 
 1000: 		patient_details_a a, patient_completion b where a.patient_number=:patient_number and a.pid=b.pid";}
 1001  	elseif($criteria=="pid"){$sql="select * from patient_completion where pid=:patient_number";}
 1002  	$placeholders[':patient_number']="$patient_number";
 ....
 1039   b.stoping, b.lenses, b.bgroup, b.anaethesia, b.Asprin, b.penicilin, b.sedatives, b.sulfa, b.codeine, b.latex, b.iodine,
 1040   b.hay, b.animals, b.food, b.food_specify, b.other, b.other_specify, b.type  from 
 1041: 		patient_details_a a, patient_medical b where a.patient_number=:patient_number and a.pid=b.pid";}
 1042  	elseif($criteria=="pid"){$sql="select * from patient_medical where pid=:patient_number";}
 1043  	$placeholders[':patient_number']="$patient_number";
 ....
 1137  		b.pedo_mesial_occlusal,b.pedo_root_carious,b.pedo_cervical,b.pedo_crown,b.pedo_implant,b.pedo_denture,b.pedo_bridge,b.pedo_root_canal,
 1138  		b.pedo_amalgam,b.pedo_composite from 
 1139: 		patient_details_a a, on_examination b where a.patient_number=:patient_number and a.pid=b.pid";}
 1140  	elseif($criteria=="pid"){$sql="select * from on_examination where pid=:patient_number";}
 1141  	$placeholders[':patient_number']="$patient_number";
 ....
 1223  	if($criteria=="patient_number"){$sql="select a.pid, b.gums_bleed, b.sensitive_teeth, b.periodontal, b.braces, b.aches, b.removeable,
 1224  	b.prev_ye_no, b.prev, b.curr, b.last_dental, b.last_xray, b.done1, b.appearance, b.when_added, from 
 1225: 		patient_details_a a, patient_dental b where a.patient_number=:patient_number and a.pid=b.pid";}
 1226  	elseif($criteria=="pid"){$sql="select * from patient_dental where pid=:patient_number";}
 1227  	$placeholders[':patient_number']="$patient_number";
 ....
 1253  	if($criteria=="patient_number"){$sql="select a.pid, b.when_added, b.pregnant,b.nursing,b.control,
 1254  	b.pjoint,b.pwhen,b.complication,b.antibiotics,b.dose,b.pname,b.pphone from 
 1255: 		patient_details_a a, patient_women b where a.patient_number=:patient_number and a.pid=b.pid";}
 1256  	elseif($criteria=="pid"){$sql="select * from patient_women where pid=:patient_number";}
 1257  	$placeholders[':patient_number']="$patient_number";
 ....
 1291    mental,   mspecify ,   neuro,   nspecify ,   osteoporosis,   swollen,   rproblems,   emphysema ,   headaches,   wloss,   std,   sinus,   sleep, 
 1292    sores,   stroke,   systematic,   thyroid,   tb,   ulcers,   urination,   other text,    when_added,   other_yes_no from 
 1293: 		patient_details_a a, patient_disease b where a.patient_number=:patient_number and a.pid=b.pid";}
 1294  	elseif($criteria=="pid"){$sql="select * from patient_disease where pid=:patient_number";}
 1295  	$placeholders[':patient_number']="$patient_number";
 ....
 1423  			$sql2=$error2=$s2='';$placeholders2=array();
 1424  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1425: 				from patient_details_a a, patient_relationships b 
 1426  				where family_id=:family_id and a.family_title=b.id";
 1427  			$error2="Unable to get  family group memebers";
 ....
 1498  	//get family name
 1499  	$sql=$error1=$s='';$placeholders=array();
 1500: 	$sql="select a.name,a.id from family_group a, patient_details_a b where b.pid=:pid and a.id=b.family_id";
 1501  	$error="Unable to get pt family name";
 1502  	$placeholders['pid']=$pid;
 ....
 1510  			$sql2=$error2=$s2='';$placeholders2=array();
 1511  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1512: 				from patient_details_a a, patient_relationships b 
 1513  				where family_id=:family_id and a.family_title=b.id";
 1514  			$error2="Unable to get  family group memebers";
 ....
 1546  	//get family name
 1547  	$sql=$error1=$s='';$placeholders=array();
 1548: 	$sql="select a.name,a.id from family_group a, patient_details_a b where b.pid=:pid and a.id=b.family_id";
 1549  	$error="Unable to get pt family name";
 1550  	$placeholders['pid']=$pid;
 ....
 1558  			$sql2=$error2=$s2='';$placeholders2=array();
 1559  			$sql2="select last_name, middle_name, first_name, patient_number, pid ,b.name 
 1560: 				from patient_details_a a, patient_relationships b 
 1561  				where family_id=:family_id and a.family_title=b.id";
 1562  			$error2="Unable to get  family group memebers";
 ....
 1586  	//get patient details a
 1587  	$sql=$error=$s='';$placeholders=array();	
 1588: 	if($criteria=="patient_number"){$sql="select * from patient_details_a where patient_number=:patient_number and internal_patient=0";}
 1589: 	elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number and internal_patient=0";}
 1590: 	elseif($criteria=="mobile_number"){$sql="select * from patient_details_a where mobile_phone=:patient_number and internal_patient=0";}	
 1591: 	elseif($criteria=="business_number"){$sql="select * from patient_details_a where biz_phone=:patient_number and internal_patient=0";}	
 1592  	$placeholders[':patient_number']="$patient_number";
 1593  	$error="Error: Unable to get patient details a";
 ....
 1700  	//get patient details b
 1701  	$sql=$error=$s='';$placeholders=array();		
 1702: 	$sql="select * from patient_details_b where pid=:pid";
 1703  	$placeholders[':pid']=$_SESSION['pid'];
 1704  	$error="Error: Unable to get patient details b";
 ....
 1911  	//get credit transfered
 1912  	$sql=$error=$s='';$placeholders=array();
 1913: 	$sql="select a.first_name, a.middle_name, a.last_name , b.amount, b.when_added from patient_details_a a, credit_transfer b where
 1914  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 1915  	$placeholders[':pid']=$pid;
 ....
 2233  			//GET DONORS NAME
 2234  			$sql2=$error2=$s2='';$placeholders2=array();
 2235: 			$sql2="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 2236  			$placeholders2[':pid']=$row['tx_number'];
 2237  			$error2="Error: Unable to get donor patient details ";
 ....
 2303  	//get credit transfered
 2304  	$sql=$error=$s='';$placeholders=array();
 2305: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 2306  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 2307  	$placeholders[':pid']=$pid;
 ....
 2374  							if($payment_type=='Credit Transfer'){
 2375  								//GET DONORS NAME
 2376: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 2377  								$placeholders[':pid']=$data[1];
 2378  								$error="Error: Unable to get donor patient details ";
 ....
 2485  		//get the patients names
 2486  		$sql=$error=$s='';$placeholders=array();
 2487: 		$sql="select first_name,middle_name,last_name, patient_number from patient_details_a where pid=:pid ";
 2488  		$placeholders[':pid']=$pid_clean;
 2489  		$error="Unable to get patient names for patient";
 ....
 2676  	//get credit transfered
 2677  	$sql=$error=$s='';$placeholders=array();
 2678: 	$sql="select a.first_name, a.middle_name, a.last_name , a.patient_number, b.amount, b.when_added from patient_details_a a, credit_transfer b where
 2679  			a.pid=b.receiver_pid and b.donor_pid=:pid";
 2680  	$placeholders[':pid']=$pid;
 ....
 2755  							if($payment_type=='Credit Transfer'){
 2756  								//GET DONORS NAME
 2757: 								$sql="select first_name, middle_name, last_name , patient_number from patient_details_a where pid=:pid";
 2758  								$placeholders[':pid']=$data[1];
 2759  								$error="Error: Unable to get donor patient details ";
 ....
 2862  //this will show the basic patient details without the option to search afresh
 2863  function get_patient_basics($pdo,$pid,$encrypt){
 2864: 			$sql="select * from patient_details_a where pid=:pid";
 2865  			$placeholders[':pid']=$pid;
 2866  			$error="Error: Unable to get patient details ";
 ....
 3128  		$sql=$error=$s='';$placeholders=array();	
 3129  		if($criteria=="patient_number"){
 3130: 			$sql="select first_name, middle_name, last_name, pid, patient_number,b.name from patient_details_a a left join 
 3131  				insurance_company b on a.type=b.id where patient_number=:patient_number and internal_patient=0 ";
 3132  			$placeholders[':patient_number']=$search_criteria;
 3133  		}
 3134  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3135: 			$sql="select first_name, middle_name, last_name, pid, patient_number , b.name from patient_details_a a
 3136  				left join insurance_company b on a.type=b.id where upper($criteria) like :criteria  and internal_patient=0 ";
 3137  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 3138  		}
 3139: 		//elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
 3140  		
 3141  		$error="Error: Unable to get patient details for patient search";
 ....
 3195  		}
 3196  		elseif($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3197: 			$sql="select a.id,a.name from patient_details_a b, family_group a  where a.id=b.family_id and upper($criteria) like :criteria";
 3198  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 3199  		}
 3200  		elseif($criteria=="patient_number"){
 3201: 			$sql="select a.id, a.name from patient_details_a b, family_group a  where a.id=b.family_id and a.patient_number=:patient_number";
 3202  			$placeholders[':patient_number']=$search_criteria;
 3203  		}
 ....
 3234  		$sql=$error=$s='';$placeholders=array();
 3235  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3236: 			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name from patient_details_a a left join
 3237  				insurance_company b on a.type=b.id 	where upper($criteria) like :criteria and internal_patient=0 order by pid desc";
 3238  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 3279  		$sql=$error=$s='';$placeholders=array();
 3280  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3281: 			$sql="select first_name, middle_name, last_name, patient_number, pid, b.name from patient_details_a a left join
 3282  				insurance_company b on a.type=b.id where upper($criteria) like :criteria  order by pid desc";
 3283  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 3326  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3327  			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name 
 3328: 				from patient_details_a a left join 	insurance_company b on a.type=b.id 
 3329  				where upper($criteria) like :criteria and internal_patient=0 order by pid desc";
 3330  			$placeholders[':criteria']=strtoupper("$search_criteria%");
 ....
 3418  		$sql=$error=$s='';$placeholders=array();
 3419  		if($criteria=="first_name" or $criteria=="middle_name" or $criteria=="last_name"  ){
 3420: 			$sql="select first_name, middle_name, last_name, patient_number, pid , b.name from patient_details_a a left join
 3421  				insurance_company b on a.type=b.id where internal_patient=0 and upper($criteria) like :criteria order by pid desc";
 3422  			$placeholders[':criteria']=strtoupper("$search_criteria%");

C:\wamp\www\clinic\dental_includes\allocate_patients.php:
   54  					//get registerd patints
   55  					$sql=$error=$s='';$placeholders=array();
   56: 					$sql="select a.id,concat(b.first_name,' ',b.middle_name,' ',b.last_name) from  patient_allocations a, patient_details_a b  
   57  							where a.patient_type=1 and a.pid=b.pid  and 	(date(time_allocated)=curdate() or date(time_start_treatment)='0000-00-00')
   58  							and patient_left=0 and  date(time_start_treatment)='0000-00-00' ";					
   ..
  266  			a.pause_treatment, a.resume_treatment ,a.treatment_status, timediff(discharge_time, time_allocated),treatment_finish,
  267  			timediff(treatment_finish, time_start_treatment),timediff(now(), time_start_treatment),b.card_issued,a.previous_allocation,a.visit,a.added_by,a.expedite
  268: 			from  patient_allocations a, patient_details_a b  where a.patient_type=1 and a.pid=b.pid  and 
  269  			(date(time_allocated)=curdate()   or  date(discharge_time)='0000-00-00') order by a.id";
  270  	$error="unable to get current allocations";

C:\wamp\www\clinic\dental_includes\appointments_report.php:
   55  		//for patient number
   56  		if(!$exit_flag and $_POST['search_by_registered']=='patient_number'){
   57: 			$registered_criteria = " and patient_details_a.patient_number=:patient_number ";
   58  			$placeholders[':patient_number']=$_POST['registered_search'];
   59  			$skip_unregistered=true;
   60  			//get the guys name for the caption
   61  			$sql2=$error2=$s2='';$placeholders2=array();
   62: 			$sql2="SELECT first_name, middle_name, last_name from patient_details_a where patient_number=:patient_number";
   63  			$placeholders2[':patient_number']=$_POST['registered_search'];
   64  			$error2="Unable to get patient name";
   ..
  146  				registered_patient_appointments.am_pm,
  147  			users.first_name as docf, users.middle_name as docm, users.last_name as docl, 
  148: 			patient_details_a.first_name as ptf, patient_details_a.middle_name as ptm, 
  149: 			patient_details_a.last_name as ptl,patient_details_a.mobile_phone ,surgery_names.surgery_name,
  150  			e.appointment_date as new_appointment_date ,registered_patient_appointments.smin,registered_patient_appointments.added_by
  151  		from registered_patient_appointments join users on registered_patient_appointments.doc_id=users.id
  152: 		join patient_details_a on registered_patient_appointments.pid=patient_details_a.pid $registered_criteria 
  153  		left join surgery_names on registered_patient_appointments.surgical_unit=surgery_names.surgery_id
  154  		left join registered_patient_appointments as e on e.id=registered_patient_appointments.new_appointment_id

C:\wamp\www\clinic\dental_includes\automatic_checkup_appointment.php:
   20  			$sql="select registered_patient_appointments.appointment_date,  registered_patient_appointments.treatment, registered_patient_appointments.shour, 
   21  					registered_patient_appointments.smin, registered_patient_appointments.rank, registered_patient_appointments.status,
   22: 					registered_patient_appointments.am_pm,	patient_details_a.first_name as ptf, patient_details_a.middle_name as ptm, 
   23: 				patient_details_a.last_name as ptl,patient_details_a.mobile_phone ,surgery_names.surgery_name
   24: 				from registered_patient_appointments join  patient_details_a on registered_patient_appointments.pid=patient_details_a.pid 
   25  			left join surgery_names on registered_patient_appointments.surgical_unit=surgery_names.surgery_id
   26  				where registered_patient_appointments.doc_id=:user_id and  registered_patient_appointments.appointment_date =:today
   ..
  121  		$sql=$error=$s='';$placeholders=array();
  122  		$sql="select a.last_name,a.middle_name, a.first_name,b.first_name,b.middle_name,b.last_name,c.treatment,c.shour,c.smin,c.rank,c.surgical_unit,c.am_pm
  123: 		from patient_details_a a, users b, registered_patient_appointments c where c.pid=a.pid and c.doc_id=b.id and c.appointment_date=:appointment_date";
  124  		$placeholders[':appointment_date']=$proposed_date;
  125  		$error="Unable to get registerd appointments";

C:\wamp\www\clinic\dental_includes\cash_balance_report.php:
  172  		if(!$exit_flag and  $_POST['ptype']!='all'){
  173  			$insurer_id=$encrypt->decrypt($_POST['ptype']);
  174: 			$insurer = " and patient_details_a.type=:insurer_id ";
  175  			$placeholders[':insurer_id']=$insurer_id;
  176  		}
  ...
  219  		
  220  		if(!$exit_flag){
  221: 			/*$sql="select patient_details_a.pid,patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, patient_details_a.mobile_phone,
  222: 					patient_details_a.biz_phone, patient_details_a.email_address, patient_details_a.email_address_2, insurance_company.name,
  223: 					patient_details_a.patient_number ,b.sum_cost,c.sum_paid,d.credit_transfered,
  224  					(ifnull(b.sum_cost,0) - ifnull(c.sum_paid,0) + ifnull(d.credit_transfered,0)) as balance_left
  225: 					from patient_details_a join (select sum(authorised_cost) as sum_cost,pid from tplan_procedure where pay_type = 2 
  226: 								and status > 0 group by pid) as b on b.pid=patient_details_a.pid $insurer
  227: 					left join insurance_company on patient_details_a.type=insurance_company.id  
  228  					left join (select pid,sum(amount) as sum_paid from payments where pay_type!=7 and pay_type!=8 group by pid) as c 
  229: 										on c.pid=patient_details_a.pid
  230  					left join (select tx_number,sum(amount) as credit_transfered from payments where pay_type=10  group by tx_number) as d 
  231: 										on d.tx_number=patient_details_a.pid
  232: 					$having order by patient_details_a.email_address, patient_details_a.email_address_2
  233  					";
  234  				$error="unable to get cash balance";					
  ...
  241  					$sql2="select patient_number,pid,first_name,middle_name,last_name,mobile_phone, biz_phone, email_address, 
  242  							email_address_2,b.name as company_covered,c.name as insurer 
  243: 							from patient_details_a a 
  244  							left join covered_company b on a.company_covered=b.id 
  245  							left join insurance_company c on a.type=c.id ";

C:\wamp\www\clinic\dental_includes\cash_pledges.php:
  105  			as patient_names, b.patient_number, concat(c.first_name,' ',c.middle_name,' ',c.last_name) as added_by, a.balance,
  106  			b.mobile_phone,b.biz_phone,datediff(curdate(), date_to_clear) as days_passed,a.pid, a.comments
  107: 			from balance_clearance_date a force index(date_to_clear), patient_details_a b, users c where date_to_clear <= now() and 
  108  			a.pid=b.pid and a.added_by =c.id	order by days_passed		";
  109  		$error="Unable to get unfulfilled payment pledges";
  ...
  130  					as patient_names, b.patient_number, concat(c.first_name,' ',c.middle_name,' ',c.last_name) as added_by, a.balance,
  131  					datediff(curdate(), pledge_date) as days_passed,a.pid, a.comments
  132: 					from cash_pledge_comments a , patient_details_a b, users c where a.pid=:pid and 
  133  					a.pid=b.pid and a.added_by =c.id	order by a.id		";
  134  				$error2="Unable to get unfulfilled payment pledges";

C:\wamp\www\clinic\dental_includes\delete_appointments.php:
   44  				registered_patient_appointments.am_pm,
   45  			users.first_name as docf, users.middle_name as docm, users.last_name as docl, 
   46: 			patient_details_a.first_name as ptf, patient_details_a.middle_name as ptm, 
   47: 			patient_details_a.last_name as ptl,patient_details_a.mobile_phone ,surgery_names.surgery_name,
   48  			e.appointment_date as new_appointment_date ,registered_patient_appointments.smin ,registered_patient_appointments.id
   49  		from registered_patient_appointments join users on registered_patient_appointments.doc_id=users.id
   50: 		join patient_details_a on registered_patient_appointments.pid=patient_details_a.pid  
   51  		left join surgery_names on registered_patient_appointments.surgical_unit=surgery_names.surgery_id
   52  		left join registered_patient_appointments as e on e.id=registered_patient_appointments.new_appointment_id

C:\wamp\www\clinic\dental_includes\delete_invoice.php:
   16  	if($pid!=''){
   17  		$sql2="select tplan_procedure.invoice_id,tplan_procedure.invoice_number, min(tplan_procedure.date_invoiced) as date_invoiced,  
   18: 					 concat(users.first_name,' ',users.middle_name,' ',users.last_name) as doctor ,patient_details_a.patient_number,
   19: 					  concat(patient_details_a.first_name,' ',patient_details_a.middle_name,' ',patient_details_a.last_name) as patient_name ,
   20  					sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
   21  					sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
   22: 					from tplan_procedure join  patient_details_a on tplan_procedure.pid =:pid and patient_details_a.pid=tplan_procedure.pid 
   23  					join users on tplan_procedure.created_by=users.id
   24  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
   ..
   31  		$invoice_number=html("$invoice_number");
   32  		$sql2="select tplan_procedure.invoice_id,tplan_procedure.invoice_number, min(tplan_procedure.date_invoiced) as date_invoiced,  
   33: 					 concat(users.first_name,' ',users.middle_name,' ',users.last_name) as doctor ,patient_details_a.patient_number,
   34: 					  concat(patient_details_a.first_name,' ',patient_details_a.middle_name,' ',patient_details_a.last_name) as patient_name ,
   35  					sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
   36  					sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
   37: 					from tplan_procedure join  patient_details_a on tplan_procedure.invoice_number =:invoice_number and patient_details_a.pid=tplan_procedure.pid 
   38  					join users on tplan_procedure.created_by=users.id
   39  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
   ..
  128  					//check if that pt has any dispacthed  invoices
  129  					$sql2=$error2=$s2='';$placeholders2=array();
  130: 					$sql2="select pid from patient_details_a where patient_number=:patient_number ";
  131  					$placeholders2[':patient_number']=$_POST['indv_crit'];
  132  					$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);

C:\wamp\www\clinic\dental_includes\delete_payment.php:
   16  		$sql2="select concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_name, a.patient_number, b.when_added,
   17  			b.receipt_num,b.amount, c.name , b.id, b.invoice_id
   18: 			from payments as b join patient_details_a as a on b.pid=:pid and b.pid=a.pid
   19  			left join payment_types as c on c.id=b.pay_type order by b.id";
   20  		$placeholders2[':pid']=$pid;
   ..
   26  		$sql2="select concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_name, a.patient_number, b.when_added,
   27  			b.receipt_num,b.amount, c.name , b.id, b.invoice_id
   28: 			from payments as b join patient_details_a as a on  b.pid=a.pid and b.when_added >=:from_date and b.when_added <=:to_date 
   29  			left join payment_types as c on c.id=b.pay_type order by b.id
   30  			";
   ..
   73  			$patient_number=$_POST['search_ciretia'];
   74  			$sql=$error=$s='';$placeholders=array();	
   75: 			if($criteria=="patient_number"){$sql="select pid from patient_details_a where patient_number=:patient_number ";}
   76  			elseif($_POST['search_by']=='first_name' or $_POST['search_by']=='middle_name' or $_POST['search_by']=='last_name'){	
   77  				$result=get_pt_name2($_POST['search_by'],$_POST['search_ciretia'],$pdo,$encrypt,'token_delp1','search_by','patient_number','search_ciretia');

C:\wamp\www\clinic\dental_includes\deleted_invoices.php:
   51  		if($_POST['ptype']!='all'){
   52  			$insurer_id=$encrypt->decrypt($_POST['ptype']);
   53: 			$insurer = " and patient_details_a.type=:insurer_id ";
   54  			$placeholders[':insurer_id']=$insurer_id;
   55  		}
   ..
   58  		if($_POST['covered_company']!='all'){
   59  			$company_id=$encrypt->decrypt($_POST['covered_company']);
   60: 			$company = " and patient_details_a.company_covered=:company_id ";
   61  			$placeholders[':company_id']=$company_id;
   62  		}
   ..
   64  		
   65  				$sql="select deleted_invoices.invoice_id,deleted_invoices.invoice_number, min(deleted_invoices.date_invoiced) as date_invoiced,  
   66: 					 concat(users.first_name,' ',users.middle_name,' ',users.last_name) as doctor ,patient_details_a.patient_number,
   67: 					  concat(patient_details_a.first_name,' ',patient_details_a.middle_name,' ',patient_details_a.last_name) as patient_name ,
   68  					sum( deleted_invoices.unauthorised_cost ) - ifnull( deleted_co_payment.amount, 0 ) AS amount_requested, 
   69  					sum( deleted_invoices.authorised_cost ) - ifnull( deleted_co_payment.amount, 0 ) AS amount_approved ,
   70  					insurance_company.name as insurer, covered_company.name as corprate, deleted_invoices.when_deleted,
   71  					 concat(users_2.first_name,' ',users_2.middle_name,' ',users_2.last_name) as deleted_by
   72: 					from deleted_invoices join  patient_details_a on deleted_invoices.when_deleted >=:from_date and 
   73: 						deleted_invoices.when_deleted <=:to_date and patient_details_a.pid=deleted_invoices.pid  $insurer $company
   74  					join users on deleted_invoices.created_by=users.id
   75  					join users as users_2 on deleted_invoices.deleter=users_2.id
   76: 					left join insurance_company on patient_details_a.type=insurance_company.id
   77: 					left join covered_company on patient_details_a.company_covered=covered_company.id
   78  					left join deleted_co_payment on deleted_invoices.invoice_id=deleted_co_payment.invoice_number
   79  					where deleted_invoices.invoice_id > 0 

C:\wamp\www\clinic\dental_includes\deleted_payments.php:
   37  			b.receipt_num,b.amount, c.name , b.id, b.invoice_id,
   38  			concat(d.first_name,' ',d.middle_name,' ',d.last_name) as deleted_by, b.when_deleted
   39: 			from deleted_payments as b join patient_details_a as a on  b.pid=a.pid and b.when_added >=:from_date and b.when_added <=:to_date 
   40  			join users as d on b.deleter=d.id
   41  			left join payment_types as c on c.id=b.pay_type order by b.id

C:\wamp\www\clinic\dental_includes\dispatch_report.php:
   22  //now show what to print
   23  						$sql=$error=$s='';$placeholders=array();
   24: 						/*$sql="select patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, 
   25: 							patient_details_a.patient_number , tplan_procedure.invoice_number, 	min(tplan_procedure.date_invoiced) as date_invoiced,
   26  							sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised 
   27: 							from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
   28  							left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
   29  							group by invoice_id, dispatch_number
   ..
   44  							$sql2="SELECT b.first_name as first_name, b.middle_name as middle_name, b.last_name as last_name,
   45  									b.patient_number as patient_number, invoice_number, when_raised as date_invoiced from
   46: 									unique_invoice_number_generator a join patient_details_a b on a.pid=b.pid
   47  									where a.id=:invoice_id";
   48  							$error2="Unable to get invoice details";
   ..
  197  						$comp_covered=html($row2['name']);
  198  					}
  199: 					$corprate=' and patient_details_a.company_covered=:company_covered ';
  200  					$placeholders['company_covered']=$var2;
  201  					
  ...
  203  			
  204  			
  205: 			$sql="select tplan_procedure.invoice_id, min(tplan_procedure.date_invoiced) as date_invoiced, patient_details_a.type,
  206  					tplan_procedure.invoice_number, tplan_procedure.dispatch_number as dis_num,
  207  					sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised,
  208: 					patient_details_a.first_name, patient_details_a.middle_name,
  209: 					patient_details_a.last_name, patient_details_a.patient_number
  210: 					from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  211  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  212: 					where patient_details_a.type=:insurer_id $corprate and tplan_procedure.pay_type=1 
  213  					group by invoice_id
  214  					having amount_authorised > 0
  ...
  321  						//now show what to print
  322  						$sql=$error=$s='';$placeholders=array();
  323: 						$sql="select patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, 
  324: 							patient_details_a.patient_number , tplan_procedure.invoice_number, 	min(tplan_procedure.date_invoiced) as date_invoiced,
  325  							sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised 
  326: 							from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  327  							left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  328  							group by invoice_id, dispatch_number
  ...
  476  							$comp_covered=html($row2['name']);
  477  						}
  478: 						$corprate=' and patient_details_a.company_covered=:company_covered ';
  479  						$placeholders['company_covered']=$var2;
  480  						
  481  					}*/
  482  					
  483: 					/*$sql2="select tplan_procedure.invoice_id, min(tplan_procedure.date_invoiced) as date_invoiced, patient_details_a.type,
  484  					tplan_procedure.invoice_number, tplan_procedure.dispatch_number as dis_num,
  485  					sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised,
  486: 					patient_details_a.first_name, patient_details_a.middle_name,
  487: 					patient_details_a.last_name, patient_details_a.patient_number
  488: 					from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  489  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  490: 					where patient_details_a.type=:insurer_id $corprate and tplan_procedure.pay_type=1 
  491  					group by invoice_id
  492  					having amount_authorised > 0
  ...
  496  					$sql="select a.id as invoice_id, a.when_raised as date_invoiced, a.invoice_number, b.first_name, b.middle_name,
  497  					b.last_name, b.patient_number, d.name AS insurer, c.name AS company_covered
  498: 					from  patient_details_a b join unique_invoice_number_generator a on a.pid=b.pid 
  499  					$insurer_criteria $corprate 
  500  					JOIN insurance_company d ON d.id = b.type
  ...
  713  					$sql2="select a.dispatch_number,a.title,a.when_added,b.first_name,b.middle_name,b.last_name ,c.name,a.insurer_id,d.invoice_number,
  714  							e.first_name as ptf, e.middle_name as ptm, e.last_name as ptl,e.patient_number
  715: 							from dispatched_invoices a, users b , insurance_company c , tplan_procedure d, patient_details_a e
  716  							where a.dispatch_number=d.dispatch_number and a.dispatched_by=b.id and a.insurer_id=c.id and 
  717  							e.patient_number=:patient_number and e.pid=d.pid group by d.invoice_number";

C:\wamp\www\clinic\dental_includes\doctor_commissions.php:
   92  				$sql2=$error2=$s2='';$placeholders2=array();	
   93  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer ,internal_patient,a.type
   94: 						from patient_details_a a 
   95  						left join insurance_company c on a.type=c.id
   96  						left join covered_company b on a.company_covered=b.id 
   ..
  276  				$sql2=$error2=$s2='';$placeholders2=array();	
  277  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer ,internal_patient,a.type
  278: 						from patient_details_a a 
  279  						left join insurance_company c on a.type=c.id
  280  						left join covered_company b on a.company_covered=b.id 
  ...
  406  				$sql2=$error2=$s2='';$placeholders2=array();	
  407  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer , internal_patient,a.type
  408: 						from patient_details_a a 
  409  						left join insurance_company c on a.type=c.id
  410  						left join covered_company b on a.company_covered=b.id 
  ...
  622  				$sql2=$error2=$s2='';$placeholders2=array();	
  623  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
  624: 						from patient_details_a a 
  625  						left join covered_company b on a.company_covered=b.id 
  626  						left join insurance_company c on a.type=c.id where pid=:pid and internal_patient=0";

C:\wamp\www\clinic\dental_includes\drugs_sold.php:
   82  				from prescriptions as b join drugs as a on b.drug_id=a.id and b.when_added >=:from_date and b.when_added <=:to_date $doctor
   83  				$drug $prescription
   84: 				join patient_details_a as c on c.pid= b.pid 
   85  				join users as d on b.created_by=d.id order by b.id
   86  				";

C:\wamp\www\clinic\dental_includes\edit_appointments.php:
   28  				registered_patient_appointments.am_pm,
   29  			users.first_name as docf, users.middle_name as docm, users.last_name as docl, 
   30: 			patient_details_a.first_name as ptf, patient_details_a.middle_name as ptm, patient_details_a.last_name as ptl,patient_details_a.mobile_phone ,
   31  			surgery_names.surgery_name, registered_patient_appointments.new_appointment_id, registered_patient_appointments.id,
   32  			registered_patient_appointments.pid,e.appointment_date as new_appointment_date
   33  		from registered_patient_appointments join users on registered_patient_appointments.doc_id=users.id
   34: 		join patient_details_a on registered_patient_appointments.pid=patient_details_a.pid
   35  		left join surgery_names on registered_patient_appointments.surgical_unit=surgery_names.surgery_id
   36  		left join registered_patient_appointments as e on e.id=registered_patient_appointments.new_appointment_id

C:\wamp\www\clinic\dental_includes\edit_dispatch - Copy.php:
   22  	//get invoices in this didspatch
   23  	$sql=$error=$s='';$placeholders=array();
   24: 	$sql="SELECT patient_details_a.first_name as first_name, patient_details_a.middle_name as middle_name, patient_details_a.last_name as last_name,
   25: 		patient_details_a.patient_number as patient_number,	tplan_procedure.invoice_number as invoice_number,tplan_procedure.invoice_id as invoice_id,
   26  		min( tplan_procedure.date_invoiced ) AS date_invoiced, 
   27  			sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_authorised
   28  			FROM tplan_procedure
   29: 			JOIN patient_details_a ON tplan_procedure.pid = patient_details_a.pid
   30  			LEFT JOIN co_payment ON tplan_procedure.invoice_id = co_payment.invoice_number
   31  			GROUP BY tplan_procedure.invoice_id, dispatch_number
   ..
  191  						$comp_covered=html($row2['name']);
  192  					}
  193: 					$corprate=' and patient_details_a.company_covered=:company_covered ';
  194  					$placeholders['company_covered']=$var2;
  195  					
  ...
  197  			
  198  			
  199: 			$sql="select tplan_procedure.invoice_id, min(tplan_procedure.date_invoiced) as date_invoiced, patient_details_a.type,
  200  					tplan_procedure.invoice_number, tplan_procedure.dispatch_number as dis_num,
  201  					sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised,
  202: 					patient_details_a.first_name, patient_details_a.middle_name,
  203: 					patient_details_a.last_name, patient_details_a.patient_number
  204: 					from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  205  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  206: 					where patient_details_a.type=:insurer_id $corprate and tplan_procedure.pay_type=1 
  207  					group by invoice_id
  208  					having amount_authorised > 0
  ...
  315  						//now show what to print
  316  						$sql=$error=$s='';$placeholders=array();
  317: 						$sql="select patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, 
  318: 							patient_details_a.patient_number , tplan_procedure.invoice_number, 	min(tplan_procedure.date_invoiced) as date_invoiced,
  319  							sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised 
  320: 							from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  321  							left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  322  							group by invoice_id, dispatch_number
  ...
  517  					$sql2="select a.dispatch_number,a.title,a.when_added,b.first_name,b.middle_name,b.last_name ,c.name,a.insurer_id,d.invoice_number,
  518  							e.first_name as ptf, e.middle_name as ptm, e.last_name as ptl,e.patient_number
  519: 							from dispatched_invoices a, users b , insurance_company c , tplan_procedure d, patient_details_a e
  520  							where a.dispatch_number=d.dispatch_number and a.dispatched_by=b.id and a.insurer_id=c.id and 
  521  							e.patient_number=:patient_number and e.pid=d.pid group by d.invoice_number";

C:\wamp\www\clinic\dental_includes\edit_dispatch.php:
   22  	//get invoices in this didspatch
   23  	$sql=$error=$s='';$placeholders=array();
   24: 	/*$sql="SELECT patient_details_a.first_name as first_name, patient_details_a.middle_name as middle_name, patient_details_a.last_name as last_name,
   25: 		patient_details_a.patient_number as patient_number,	tplan_procedure.invoice_number as invoice_number,tplan_procedure.invoice_id as invoice_id,
   26  		min( tplan_procedure.date_invoiced ) AS date_invoiced, 
   27  			sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_authorised
   28  			FROM tplan_procedure
   29: 			JOIN patient_details_a ON tplan_procedure.pid = patient_details_a.pid
   30  			LEFT JOIN co_payment ON tplan_procedure.invoice_id = co_payment.invoice_number
   31  			GROUP BY tplan_procedure.invoice_id, dispatch_number
   ..
   43  		$sql2="SELECT b.first_name as first_name, b.middle_name as middle_name, b.last_name as last_name,
   44  				b.patient_number as patient_number, invoice_number, when_raised as date_invoiced from
   45: 				unique_invoice_number_generator a join patient_details_a b on a.pid=b.pid
   46  				where a.id=:invoice_id";
   47  		$error2="Unable to get invoice details";
   ..
  233  			
  234  			
  235: 			/*$sql="select tplan_procedure.invoice_id, min(tplan_procedure.date_invoiced) as date_invoiced, patient_details_a.type,
  236  					tplan_procedure.invoice_number, tplan_procedure.dispatch_number as dis_num,
  237  					sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised,
  238: 					patient_details_a.first_name, patient_details_a.middle_name,
  239: 					patient_details_a.last_name, patient_details_a.patient_number
  240: 					from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  241  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  242: 					where patient_details_a.type=:insurer_id $corprate and tplan_procedure.pay_type=1 
  243  					group by invoice_id
  244  					having amount_authorised > 0
  ...
  248  			$sql="select a.id as invoice_id, a.when_raised as date_invoiced, a.invoice_number, b.first_name, b.middle_name,
  249  					b.last_name, b.patient_number
  250: 					from  patient_details_a b join unique_invoice_number_generator a on a.pid=b.pid 
  251  					and b.type=:insurer_id $corprate 
  252  					where a.when_raised >=:from_date and a.when_raised <=:to_date";
  ...
  405  						//now show what to print
  406  						$sql=$error=$s='';$placeholders=array();
  407: 						/*$sql="select patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, 
  408: 							patient_details_a.patient_number , tplan_procedure.invoice_number, 	min(tplan_procedure.date_invoiced) as date_invoiced,
  409  							sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised 
  410: 							from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  411  							left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  412  							group by invoice_id, dispatch_number
  ...
  423  							$sql2="SELECT b.first_name as first_name, b.middle_name as middle_name, b.last_name as last_name,
  424  									b.patient_number as patient_number, invoice_number, when_raised as date_invoiced from
  425: 									unique_invoice_number_generator a join patient_details_a b on a.pid=b.pid
  426  									where a.id=:invoice_id";
  427  							$error2="Unable to get invoice details";
  ...
  653  					$sql2="select a.dispatch_number,a.title,a.when_added,b.first_name,b.middle_name,b.last_name ,c.name,a.insurer_id,d.invoice_number,
  654  							e.first_name as ptf, e.middle_name as ptm, e.last_name as ptl,e.patient_number
  655: 							from dispatched_invoices a, users b , insurance_company c , tplan_procedure d, patient_details_a e
  656  							where a.dispatch_number=d.dispatch_number and a.dispatched_by=b.id and a.insurer_id=c.id and 
  657  							e.patient_number=:patient_number and e.pid=d.pid group by d.invoice_number";

C:\wamp\www\clinic\dental_includes\Find Results:
 1210   6945  			
 1211   6946  		//	echo "-3157-";
 1212:  6947: 			//now insert into patient_details_a
 1213   6948  			$sql=$error=$s='';$placeholders=array();
 1214:  6949: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 1215   6950  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 1216   6951  					year=:year, internal_patient=2";
 ....
 1218   6963  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 1219   6964  		//	echo "-3175-";
 1220:  6965: 			//now insert into patient_details_b
 1221   6966  			$sql=$error=$s='';$placeholders=array();
 1222:  6967: 			$sql="insert into patient_details_b set  when_added=:when_added,
 1223   6968  					 pid=:pid,  referee=:referee";
 1224   6969  			$error="Unable to add patient new patient";
 ....
 1292   7350  			
 1293   7351  		//	echo "-3157-";
 1294:  7352: 			//now insert into patient_details_a
 1295   7353  			$sql=$error=$s='';$placeholders=array();
 1296:  7354: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 1297   7355  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 1298   7356  					year=:year, internal_patient=1";
 ....
 1300   7368  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 1301   7369  		//	echo "-3175-";
 1302:  7370: 			//now insert into patient_details_b
 1303   7371  			$sql=$error=$s='';$placeholders=array();
 1304:  7372: 			$sql="insert into patient_details_b set  when_added=:when_added,
 1305   7373  					 pid=:pid,  referee=:referee";
 1306   7374  			$error="Unable to add patient new patient";
 ....
 1712   17711  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 1713   17712  			
 1714:  17713: 			//now insert into patient_details_a
 1715   17714  			$sql=$error=$s='';$placeholders=array();
 1716:  17715: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 1717   17716  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 1718   17717  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 ....
 1720   17732  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 1721   17733  			
 1722:  17734: 			//now insert into patient_details_b
 1723   17735  			$sql=$error=$s='';$placeholders=array();
 1724:  17736: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 1725   17737  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 1726   17738  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 ....
 1728   17857  				
 1729   17858  				$sql=$error=$s='';$placeholders=array();
 1730:  17859: 				$sql="insert into changed_patient_details set
 1731   17860  						pid=:pid,
 1732   17861  						field_changed='Patient Type',
 ....
 1734   17886  				}
 1735   17887  				$sql=$error=$s='';$placeholders=array();
 1736:  17888: 				$sql="insert into changed_patient_details set
 1737   17889  						pid=:pid,
 1738   17890  						field_changed='Company Covered',
 ....
 2012   6235  			
 2013   6236  		//	echo "-3157-";
 2014:  6237: 			//now insert into patient_details_a
 2015   6238  			$sql=$error=$s='';$placeholders=array();
 2016:  6239: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 2017   6240  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 2018   6241  					year=:year, internal_patient=2";
 ....
 2020   6253  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 2021   6254  		//	echo "-3175-";
 2022:  6255: 			//now insert into patient_details_b
 2023   6256  			$sql=$error=$s='';$placeholders=array();
 2024:  6257: 			$sql="insert into patient_details_b set  when_added=:when_added,
 2025   6258  					 pid=:pid,  referee=:referee";
 2026   6259  			$error="Unable to add patient new patient";
 ....
 2094   6640  			
 2095   6641  		//	echo "-3157-";
 2096:  6642: 			//now insert into patient_details_a
 2097   6643  			$sql=$error=$s='';$placeholders=array();
 2098:  6644: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 2099   6645  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 2100   6646  					year=:year, internal_patient=1";
 ....
 2102   6658  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 2103   6659  		//	echo "-3175-";
 2104:  6660: 			//now insert into patient_details_b
 2105   6661  			$sql=$error=$s='';$placeholders=array();
 2106:  6662: 			$sql="insert into patient_details_b set  when_added=:when_added,
 2107   6663  					 pid=:pid,  referee=:referee";
 2108   6664  			$error="Unable to add patient new patient";
 ....
 2486   15035  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 2487   15036  			
 2488:  15037: 			//now insert into patient_details_a
 2489   15038  			$sql=$error=$s='';$placeholders=array();
 2490:  15039: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 2491   15040  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 2492   15041  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 ....
 2494   15056  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 2495   15057  			
 2496:  15058: 			//now insert into patient_details_b
 2497   15059  			$sql=$error=$s='';$placeholders=array();
 2498:  15060: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 2499   15061  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 2500   15062  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 ....
 2840   7329  			
 2841   7330  		//	echo "-3157-";
 2842:  7331: 			//now insert into patient_details_a
 2843   7332  			$sql=$error=$s='';$placeholders=array();
 2844:  7333: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 2845   7334  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 2846   7335  					year=:year, internal_patient=2";
 ....
 2848   7347  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 2849   7348  		//	echo "-3175-";
 2850:  7349: 			//now insert into patient_details_b
 2851   7350  			$sql=$error=$s='';$placeholders=array();
 2852:  7351: 			$sql="insert into patient_details_b set  when_added=:when_added,
 2853   7352  					 pid=:pid,  referee=:referee";
 2854   7353  			$error="Unable to add patient new patient";
 ....
 2922   7754  			
 2923   7755  		//	echo "-3157-";
 2924:  7756: 			//now insert into patient_details_a
 2925   7757  			$sql=$error=$s='';$placeholders=array();
 2926:  7758: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 2927   7759  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 2928   7760  					year=:year, internal_patient=1";
 ....
 2930   7772  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 2931   7773  		//	echo "-3175-";
 2932:  7774: 			//now insert into patient_details_b
 2933   7775  			$sql=$error=$s='';$placeholders=array();
 2934:  7776: 			$sql="insert into patient_details_b set  when_added=:when_added,
 2935   7777  					 pid=:pid,  referee=:referee";
 2936   7778  			$error="Unable to add patient new patient";
 ....
 3414   19494  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 3415   19495  			
 3416:  19496: 			//now insert into patient_details_a
 3417   19497  			$sql=$error=$s='';$placeholders=array();
 3418:  19498: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 3419   19499  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 3420   19500  					year=:year,email_address=:email_address, email_address_2=:email_address_2, card_issued=:card_issued, added_by=:added_by";
 ....
 3422   19517  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 3423   19518  			
 3424:  19519: 			//now insert into patient_details_b
 3425   19520  			$sql=$error=$s='';$placeholders=array();
 3426:  19521: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 3427   19522  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 3428   19523  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 ....
 3430   19643  				
 3431   19644  				$sql=$error=$s='';$placeholders=array();
 3432:  19645: 				$sql="insert into changed_patient_details set
 3433   19646  						pid=:pid,
 3434   19647  						field_changed='Patient Type',
 ....
 3436   19672  				}
 3437   19673  				$sql=$error=$s='';$placeholders=array();
 3438:  19674: 				$sql="insert into changed_patient_details set
 3439   19675  						pid=:pid,
 3440   19676  						field_changed='Company Covered',
 ....
 3923   6198  			
 3924   6199  		//	echo "-3157-";
 3925:  6200: 			//now insert into patient_details_a
 3926   6201  			$sql=$error=$s='';$placeholders=array();
 3927:  6202: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 3928   6203  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 3929   6204  					year=:year, internal_patient=2";
 ....
 3931   6216  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 3932   6217  		//	echo "-3175-";
 3933:  6218: 			//now insert into patient_details_b
 3934   6219  			$sql=$error=$s='';$placeholders=array();
 3935:  6220: 			$sql="insert into patient_details_b set  when_added=:when_added,
 3936   6221  					 pid=:pid,  referee=:referee";
 3937   6222  			$error="Unable to add patient new patient";
 ....
 4005   6603  			
 4006   6604  		//	echo "-3157-";
 4007:  6605: 			//now insert into patient_details_a
 4008   6606  			$sql=$error=$s='';$placeholders=array();
 4009:  6607: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 4010   6608  					type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 4011   6609  					year=:year, internal_patient=1";
 ....
 4013   6621  			$pid = get_insert_id($sql, $placeholders, $error, $pdo);	
 4014   6622  		//	echo "-3175-";
 4015:  6623: 			//now insert into patient_details_b
 4016   6624  			$sql=$error=$s='';$placeholders=array();
 4017:  6625: 			$sql="insert into patient_details_b set  when_added=:when_added,
 4018   6626  					 pid=:pid,  referee=:referee";
 4019   6627  			$error="Unable to add patient new patient";
 ....
 4397   14931  			$s = 	insert_sql($sql, $placeholders, $error, $pdo);	
 4398   14932  			
 4399:  14933: 			//now insert into patient_details_a
 4400   14934  			$sql=$error=$s='';$placeholders=array();
 4401:  14935: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 4402   14936  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 4403   14937  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 ....
 4405   14952  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 4406   14953  			
 4407:  14954: 			//now insert into patient_details_b
 4408   14955  			$sql=$error=$s='';$placeholders=array();
 4409:  14956: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 4410   14957  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 4411   14958  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 ....
 4421    218  			$pid="$pnum/$year";
 4422    219  			
 4423:   220: 			//now insert into patient_details_a
 4424    221  			$sql=$error=$s='';$placeholders=array();
 4425:   222: 			$sql="insert into patient_details_a set last_name=:last_name, middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 4426    223  					biz_phone=:biz_phone, type=:type, patient_number=:patient_number, member_no=:member_no, company_covered=:company_covered, pnum=:pnum,
 4427    224  					year=:year,email_address=:email_address, email_address_2=:email_address_2";
 ....
 4429    239  			$id = get_insert_id($sql, $placeholders, $error, $pdo);	
 4430    240  			
 4431:   241: 			//now insert into patient_details_b
 4432    242  			$sql=$error=$s='';$placeholders=array();
 4433:   243: 			$sql="insert into patient_details_b set id_number=:id_number, address=:address, city=:city, occupation=:occupation,
 4434    244  					em_relationship=:em_relationship, em_phone=:em_phone, behalf_name=:behalf_name, behalf_relationship=:behalf_relationship, when_added=:when_added,
 4435    245  					gender=:gender,	photo_path=:photo_path, pid=:pid, weight=:weight, dob=:dob, referee=:referee, em_contact=:em_contact";
 ....
 4472    187  	
 4473    188  				$old_patient_number=html($row['patient_number']);
 4474:   189: 				//now insert into patient_details_a
 4475    190  				$sql2=$error2=$s2='';$placeholders2=array();
 4476:   191: 				$sql2="insert into patient_details_a set last_name=:last_name, 
 4477    192  					middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 4478    193  						biz_phone=:biz_phone, type=:type, patient_number=:patient_number, 
 ....
 4480    224  				$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
 4481    225  				foreach($s2 as $row2){
 4482:   226: 					//now insert into patient_details_b
 4483    227  					$sql3=$error3=$s3='';$placeholders3=array();
 4484:   228: 					$sql3="insert into patient_details_b set id_number=:id_number, address=:address,
 4485    229  						city=:city, occupation=:occupation,weight=:weight, dob=:dob, referee=:referee,
 4486    230  							em_contact=:em_contact,em_relationship=:em_relationship, em_phone=:em_phone,
 ....
 4535    187  	
 4536    188  				$old_patient_number=html($row['patient_number']);
 4537:   189: 				//now insert into patient_details_a
 4538    190  				$sql2=$error2=$s2='';$placeholders2=array();
 4539:   191: 				$sql2="insert into patient_details_a set last_name=:last_name, 
 4540    192  					middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 4541    193  						biz_phone=:biz_phone, type=:type, patient_number=:patient_number, 
 ....
 4543    224  				$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
 4544    225  				foreach($s2 as $row2){
 4545:   226: 					//now insert into patient_details_b
 4546    227  					$sql3=$error3=$s3='';$placeholders3=array();
 4547:   228: 					$sql3="insert into patient_details_b set id_number=:id_number, address=:address,
 4548    229  						city=:city, occupation=:occupation,weight=:weight, dob=:dob, referee=:referee,
 4549    230  							em_contact=:em_contact,em_relationship=:em_relationship, em_phone=:em_phone,
 ....
 4746    104  						foreach($s as $row){
 4747    105  							$old_patient_number=html($row['patient_number']);
 4748:   106: 							//now insert into patient_details_a
 4749    107  							$sql2=$error2=$s2='';$placeholders2=array();
 4750:   108: 							$sql2="insert into patient_details_a set last_name=:last_name, 
 4751    109  								middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
 4752    110  									biz_phone=:biz_phone, type=:type, patient_number=:patient_number, 
 ....
 4754    144  						$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
 4755    145  						foreach($s2 as $row2){
 4756:   146: 							//now insert into patient_details_b
 4757    147  							$sql3=$error3=$s3='';$placeholders3=array();
 4758:   148: 							$sql3="insert into patient_details_b set id_number=:id_number, address=:address,
 4759    149  								city=:city, occupation=:occupation,weight=:weight, dob=:dob, referee=:referee,
 4760    150  									em_contact=:em_contact,em_relationship=:em_relationship, em_phone=:em_phone,

C:\wamp\www\clinic\dental_includes\finished_patient_work.php:
   98  		}*/
   99  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
  100: 		c.last_name, d.technician_name, a.date_returned from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
  101  		a.doc_id=c.id  $criteria and  a.date_returned is not null and a.date_lab_given_to_patient is null  order by a.lab_id ";
  102  		$error="Unable to get finished lab work that has not been given to patient";

C:\wamp\www\clinic\dental_includes\follow_ups - Copy.php:
   36  	$sql="select a.first_name, a.middle_name, a.last_name,  a.mobile_phone, a.biz_phone, b.id , b.treatment_plan_id,
   37  		b.follow_up_date
   38: 		from patient_details_a a, follow_ups b  where b.status=0 and b.pid=a.pid  
   39  		$user_criteria order by b.id";					
   40  	$error="Unable to get follows up due today";

C:\wamp\www\clinic\dental_includes\follow_ups.php:
   88  	$sql="select a.first_name, a.middle_name, a.last_name,  a.mobile_phone, a.biz_phone, b.id , b.treatment_plan_id,
   89  		b.follow_up_date
   90: 		from patient_details_a a, follow_ups b  where b.status=0 and b.pid=a.pid  
   91  		$user_criteria order by b.id";					
   92  	$error="Unable to get follows up due today";

C:\wamp\www\clinic\dental_includes\income_report.php:
   70  		$sql=$error=$s='';$placeholders=array();
   71  		/*select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
   72: 			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number from payments a, patient_details_a b, users c, payment_types d
   73  			where a.pay_type=:pay_type and a.when_added >=:from_date	and a.when_added <=:to_date and a.pid=b.pid and 
   74  			a.created_by=c.id and d.id=a.pay_type*/
   ..
   76  			$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
   77  				c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number 
   78: 				from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=:pay_type and a.when_added >=:from_date	and a.when_added <=:to_date
   79  				left join users c on a.created_by=c.id
   80  				left join payment_types d on d.id=a.pay_type order by a.id";
   ..
   88  			$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
   89  				c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number , e.first_name, e.middle_name, e.last_name, e.patient_number
   90: 				from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=:pay_type and a.when_added >=:from_date	and a.when_added <=:to_date
   91: 				join patient_details_a e on e.pid=a.tx_number
   92  				left join users c on a.created_by=c.id
   93  				left join payment_types d on d.id=a.pay_type order by a.id";
   ..
  270  		$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
  271  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number ,a.id, b.internal_patient, a.pay_type
  272: 			from payments a join patient_details_a b on a.pid=b.pid and a.when_added >=:from_date and a.when_added <=:to_date
  273  			and a.invoice_id=0 and a.pay_type!=10
  274  			left join users c on a.created_by=c.id
  ...
  294  		$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
  295  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number ,a.id, b.internal_patient, a.pay_type,a.when_deleted,a.deleter
  296: 			from deleted_payments a join patient_details_a b on a.pid=b.pid  and a.when_added >=:from_date and a.when_added <=:to_date
  297  			and a.invoice_id=0 and a.pay_type!=10
  298  			left join users c on a.created_by=c.id
  ...
  321  		$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
  322  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number ,a.id, b.internal_patient, a.pay_type,a.when_deleted,a.deleter
  323: 			from deleted_payments a join patient_details_a b on a.pid=b.pid  and a.when_deleted >=:from_date and a.when_deleted <=:to_date
  324  			and a.invoice_id=0 and a.pay_type!=10
  325  			left join users c on a.deleter=c.id
  ...
  363  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number , e.first_name, e.middle_name, e.last_name, 
  364  			e.patient_number, a.id, b.internal_patient,a.pay_type
  365: 			from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=10 and a.when_added >=:from_date	and a.when_added <=:to_date
  366  			and a.invoice_id=0
  367: 			join patient_details_a e on e.pid=a.tx_number
  368  			left join users c on a.created_by=c.id
  369  			left join payment_types d on d.id=a.pay_type order by a.id";*/
  ...
  371  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number , 
  372  			 a.id, b.internal_patient,a.pay_type
  373: 			from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=10 and a.when_added >=:from_date	and a.when_added <=:to_date
  374  			and a.invoice_id=0
  375  			left join users c on a.created_by=c.id
  ...
  593  				$sql2=$error2=$s2='';$placeholders2=array();	
  594  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
  595: 						from patient_details_a a 
  596  						left join covered_company b on a.company_covered=b.id 
  597  						left join insurance_company c on a.type=c.id where pid=:pid";
  ...
  792  		//get invoices raised before  this period but paid in this period
  793  			//start modify
  794: 			//get details from payments and patient_details
  795  			$sql=$error=$s='';$placeholders=array();
  796  			$sql="SELECT sum(amount) as amount_paid, concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_name, invoice_id, 
  797  					insurance_company.name as insurer_name,	covered_company.name  as company_covered
  798: 					  FROM payments b join patient_details_a a on b.pid=a.pid
  799  					left join covered_company on a.company_covered=covered_company.id 
  800  						left	join insurance_company on a.type=insurance_company.id  
  ...
 1013  		$sql=$error=$s='';$placeholders=array();
 1014  		$sql="select  a.amount,d.name ,  b.internal_patient, a.pay_type
 1015: 			from payments a join patient_details_a b on a.pid=b.pid and a.when_added >=:from_date and a.when_added <=:to_date
 1016  			and a.invoice_id=0 and a.pay_type!=10
 1017  			left join payment_types d on d.id=a.pay_type ";
 ....
 1028  		$sql=$error=$s='';$placeholders=array();
 1029  		$sql="select a.amount,d.name , 	 b.internal_patient,a.pay_type
 1030: 			from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=10 and a.when_added >=:from_date	and a.when_added <=:to_date
 1031  			and a.invoice_id=0
 1032  			left join payment_types d on d.id=a.pay_type order by a.id";
 ....
 1157  			//get invoices raised before  this period but paid in this period
 1158  			//start modify
 1159: 			//get details from payments and patient_details
 1160  			$sql=$error=$s='';$placeholders=array();
 1161  			$sql="SELECT sum(amount) as amount_paid,  invoice_id

C:\wamp\www\clinic\dental_includes\insurance_payment.php:
  109  					$sql2=$error2=$s2='';$placeholders2=array();	
  110  					$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
  111: 						from patient_details_a a left join covered_company b 
  112  						on a.company_covered=b.id 
  113  						left join insurance_company c on a.type=c.id
  ...
  182  			//single patient search
  183  			elseif($_POST['search_single']=='patient_id' and $_POST['search_single_input']!=''){
  184: 				$pnum=" and patient_details_a.patient_number=:patient_number ";
  185  				$placeholders['patient_number']=$_POST['search_single_input'];
  186  				$pnum_search=true;
  ...
  188  				//get the pid first
  189  				$sql1=$error1=$s1='';$placeholders1=array();	
  190: 				$sql1="SELECT pid  FROM patient_details_a WHERE patient_number=:patient_number";
  191  				$placeholders1[':patient_number']=$_POST['search_single_input'];
  192  				$error1="Error: Unable to date range uniq ";
  ...
  213  					$sql2=$error2=$s2='';$placeholders2=array();	
  214  					$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer 
  215: 						from patient_details_a a left join covered_company b 
  216  						on a.company_covered=b.id 
  217  						left join insurance_company c on a.type=c.id
  ...
  314  				elseif($_POST['ptype']!=''){
  315  					$var=$encrypt->decrypt($_POST['ptype']);
  316: 					$ptype=" and patient_details_a.type=:insurer ";
  317  					$placeholders['insurer']=$var;
  318  					//get insurance name
  ...
  356  						//now check if the pt is from the mentioned insuer
  357  						$sql2=$error2=$s2='';$placeholders2=array();	
  358: 						$sql2="select first_name,middle_name,last_name,name from patient_details_a a left join covered_company b 
  359  							on a.company_covered=b.id where pid=:pid and type=:insurer $covered_company";
  360  						if(isset($covered_company_id) and $covered_company_id > 0){
  ...
  427  						sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) - c.sum_paid  as balance,
  428  						min(tplan_procedure.date_invoiced) as date_invoiced, users.first_name,users.last_name,users.middle_name,
  429: 						patient_details_a.first_name,patient_details_a.last_name,patient_details_a.middle_name,	insurance_company.name,
  430  						covered_company.name ,tplan_procedure.pid 
  431: 						from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid and tplan_procedure.invoice_id > 0
  432  							$pnum $inv_num_criteria
  433  						join users on users.id=tplan_procedure.created_by
  434: 						left join covered_company on patient_details_a.company_covered=covered_company.id $covered_company
  435: 						left	join insurance_company on patient_details_a.type=insurance_company.id  $ptype
  436  						left join (select invoice_id,sum(amount) as sum_paid from payments group by invoice_id) as c 
  437  							on c.invoice_id=tplan_procedure.invoice_id

C:\wamp\www\clinic\dental_includes\invoice_authorisation.php:
   34  				b.company_covered, d.pre_auth_needed, d.smart_needed
   35  				from tplan_procedure a,
   36:                patient_details_a b , insurance_company c , covered_company d where a.invoice_id > 0 and b.pid=a.pid and c.id=b.type and b.company_covered=d.id
   37  			    and a.date_invoiced >= :from_date and a.date_invoiced <=:to_date group by a.invoice_id order by a.invoice_id";
   38  		*/
   39  		/*$sql2="select tplan_procedure.invoice_id,tplan_procedure.invoice_number, min(tplan_procedure.date_invoiced), 
   40: 				patient_details_a.last_name, patient_details_a.middle_name, patient_details_a.first_name, insurance_company.name , 
   41: 				covered_company.name, patient_details_a.type, patient_details_a.company_covered, covered_company.pre_auth_needed, 
   42  				covered_company.smart_needed, sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested
   43: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
   44: 				join insurance_company on insurance_company.id=patient_details_a.type 
   45: 				join covered_company on patient_details_a.company_covered=covered_company.id 
   46  				left join co_payment ON tplan_procedure.invoice_id = co_payment.invoice_number
   47  				where tplan_procedure.invoice_id > 0  and tplan_procedure.date_invoiced >=:from_date and 
   48  				tplan_procedure.date_invoiced <=:to_date group by tplan_procedure.invoice_id order by tplan_procedure.invoice_id";*/
   49  		/*$sql2="select tplan_procedure.invoice_id,tplan_procedure.invoice_number, min(tplan_procedure.date_invoiced) as min_date, 
   50: 				patient_details_a.last_name, patient_details_a.middle_name, patient_details_a.first_name, insurance_company.name , 
   51: 				covered_company.name, patient_details_a.type, patient_details_a.company_covered, covered_company.pre_auth_needed, 
   52  				covered_company.smart_needed, sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested
   53: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
   54: 				join insurance_company on insurance_company.id=patient_details_a.type 
   55: 				join covered_company on patient_details_a.company_covered=covered_company.id 
   56  				left join co_payment ON tplan_procedure.invoice_id = co_payment.invoice_number
   57  				where tplan_procedure.invoice_id > 0   group by tplan_procedure.invoice_id having min_date>=:from_date
   ..
   77  				$sql2="select first_name,middle_name,last_name,b.name as company_covered,c.name as insurer,
   78  						b.smart_needed,b.pre_auth_needed
   79: 						from patient_details_a a 
   80  						left join covered_company b on a.company_covered=b.id 
   81  						left join insurance_company c on a.type=c.id where pid=:pid";
   ..
  278  	$sql=$error=$s='';$placeholders=array();
  279  	$sql="select tplan_procedure.invoice_id,tplan_procedure.invoice_number, min(tplan_procedure.date_invoiced),  
  280: 		patient_details_a.last_name, patient_details_a.middle_name, patient_details_a.first_name, insurance_company.name , 
  281: 		covered_company.name, patient_details_a.type, patient_details_a.company_covered, covered_company.pre_auth_needed, 
  282  		covered_company.smart_needed, 
  283  		invoice_authorisation.authorisation_sent, invoice_authorisation.authorisation_received, invoice_authorisation.smart_run, 
  284  		invoice_authorisation.amount_authorised, invoice_authorisation.comments,invoice_authorisation.smart_amount,  
  285: 		users.first_name,users.middle_name,users.last_name,patient_details_a.member_no  
  286  		
  287: 		from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
  288  		join users on tplan_procedure.created_by=users.id
  289: 		join insurance_company on insurance_company.id=patient_details_a.type 
  290: 		join covered_company on patient_details_a.company_covered=covered_company.id $pre_auth_yes
  291  		 join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
  292  		
  ...
  296  		$pre_sent_unreceived  
  297  		  
  298: 		group by tplan_procedure.invoice_id  order by patient_details_a.type";
  299  		$error="Unable to get invoices not sent for pre-authorisation";
  300  	$s = 	select_sql($sql, $placeholders, $error, $pdo);	

C:\wamp\www\clinic\dental_includes\invoice_authorisations_report.php:
   74  		if($_POST['ptype']!='all'){
   75  			$insurer_id=$encrypt->decrypt($_POST['ptype']);
   76: 			$insurer = " and patient_details_a.type=:insurer_id ";
   77  			$placeholders[':insurer_id']=$insurer_id;
   78  		}
   ..
   81  		if($_POST['covered_company']!='all'){
   82  			$company_id=$encrypt->decrypt($_POST['covered_company']);
   83: 			$company = " and patient_details_a.company_covered=:company_id ";
   84  			$placeholders[':company_id']=$company_id;
   85  		}
   ..
  161  			
  162  			$sql="select tplan_procedure.invoice_id,tplan_procedure.invoice_number, min(tplan_procedure.date_invoiced),  
  163: 				patient_details_a.last_name, patient_details_a.middle_name, patient_details_a.first_name, insurance_company.name , 
  164: 				covered_company.name, patient_details_a.type, patient_details_a.company_covered, covered_company.pre_auth_needed, 
  165  				covered_company.smart_needed, 
  166  				invoice_authorisation.authorisation_sent, invoice_authorisation.authorisation_received, invoice_authorisation.smart_run, 
  167  				invoice_authorisation.amount_authorised, invoice_authorisation.comments,invoice_authorisation.smart_amount,  
  168: 				users.first_name,users.middle_name,users.last_name,patient_details_a.member_no  
  169  				$pre_partially_declined $smart_partially_declined
  170: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid $doctor $insurer $company
  171  				join users on tplan_procedure.created_by=users.id
  172: 				join insurance_company on insurance_company.id=patient_details_a.type 
  173: 				join covered_company on patient_details_a.company_covered=covered_company.id $pre_auth_yes $smart_yes
  174  				$left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
  175  				$left_copayment

C:\wamp\www\clinic\dental_includes\invoice_dispatch.php:
   70  						//now show what to print
   71  						/*$sql=$error=$s='';$placeholders=array();
   72: 						$sql="select patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, 
   73: 							patient_details_a.patient_number , tplan_procedure.invoice_number, 	min(tplan_procedure.date_invoiced) as date_invoiced,
   74  							sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised 
   75: 							from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
   76  							left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
   77  							group by invoice_id, dispatch_number
   ..
   95  							$sql2=$error2=$s2='';$placeholders2=array();	
   96  							$sql2="select first_name,middle_name,last_name,patient_number
   97: 									from patient_details_a where pid=:pid ";
   98  							$placeholders2[':pid']=$row1['pid'];
   99  							$error2="Error: Unable to pt details from uniq ";
  ...
  216  						$comp_covered=html($row2['name']);
  217  					}
  218: 					$corprate=' and patient_details_a.company_covered=:company_covered ';
  219  					$placeholders['company_covered']=$var2;
  220  					
  ...
  233  				$sql2=$error2=$s2='';$placeholders2=array();	
  234  				$sql2="select first_name,middle_name,last_name,patient_number
  235: 						from patient_details_a where pid=:pid and type=:type $corprate ";
  236  				$placeholders2[':pid']=$row1['pid'];
  237  				$placeholders2[':type']=$insurer_id;
  ...
  266  				}
  267  			}
  268: 			/*$sql="select tplan_procedure.invoice_id, min(tplan_procedure.date_invoiced) as date_invoiced, patient_details_a.type,
  269  					tplan_procedure.invoice_number, tplan_procedure.dispatch_number as dis_num,
  270  					sum(tplan_procedure.authorised_cost) - ifnull(co_payment.amount, 0) as amount_authorised,
  271: 					patient_details_a.first_name, patient_details_a.middle_name,
  272: 					patient_details_a.last_name, patient_details_a.patient_number
  273: 					from tplan_procedure join patient_details_a on tplan_procedure.pid=patient_details_a.pid 
  274  					left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  275: 					where patient_details_a.type=:insurer_id $corprate and tplan_procedure.pay_type=1 
  276  					group by invoice_id
  277  					having amount_authorised > 0
  ...
  403  	//get details from unique_inv_table first
  404  	$sql1=$error1=$s1='';$placeholders1=array();	
  405: 	$sql1="SELECT c.type, a.id from unique_invoice_number_generator a, tplan_procedure b, patient_details_a c
  406  			where b.invoice_id=a.id and a.pid=c.pid and 
  407  			a.when_raised > '2015-01-01' and a.when_raised < DATE_SUB(curdate(),INTERVAL 25 DAY)

C:\wamp\www\clinic\dental_includes\invoice_search.php:
   22  	//get pt names and patient number 
   23  	$sql=$error=$s='';$placeholders=array();
   24: 	$sql="select first_name, middle_name, last_name, patient_number from patient_details_a where pid=:pid";
   25  	$error="Unable to get invoices for patient in tdone";
   26  	$placeholders[':pid']=$pid;
   ..
   41  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
   42  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
   43: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
   44  				join users on tplan_procedure.created_by=users.id
   45: 				join covered_company on patient_details_a.company_covered=covered_company.id 
   46  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
   47  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
   ..
  125  	//get pt names and patient number 
  126  	$sql=$error=$s='';$placeholders=array();
  127: 	$sql="select first_name, middle_name, last_name, patient_number from patient_details_a where pid=:pid";
  128  	$error="Unable to get invoices for patient in tdone";
  129  	$placeholders[':pid']=$pid;
  ...
  144  				sum( tplan_procedure.unauthorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_requested, 
  145  				sum( tplan_procedure.authorised_cost ) - ifnull( co_payment.amount, 0 ) AS amount_approved 
  146: 				from tplan_procedure join  patient_details_a on patient_details_a.pid=tplan_procedure.pid 
  147  				join users on tplan_procedure.created_by=users.id
  148: 				join covered_company on patient_details_a.company_covered=covered_company.id 
  149  				left join invoice_authorisation on tplan_procedure.invoice_id=invoice_authorisation.invoice_id 
  150  				left join co_payment on tplan_procedure.invoice_id=co_payment.invoice_number
  ...
  279  					//get the bloody pid
  280  					$sql2=$error2=$s2='';$placeholders2=array();
  281: 					$sql2="select pid from patient_details_a where patient_number=:patient_number";
  282  					$placeholders2[':patient_number']=$_POST['indv_crit'];
  283  					$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);

C:\wamp\www\clinic\dental_includes\lab_payments.php:
   50  		}*/
   51  		$sql="select a.when_added, a.lab_id, a.date_returned, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
   52: 		c.last_name, d.technician_name from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
   53  		a.doc_id=c.id  $criteria and date_returned is not null and a.amount > 0 and a.when_added >= '2013-01-01' order by a.lab_id";
   54  		$error="Unable to get returned work";

C:\wamp\www\clinic\dental_includes\patient_list - Copy.php:
   70  			//summary report
   71  			if(!$exit_flag and $_POST['summary_detail']=='summary'   ){	
   72: 				$sql="select count(c.pid),b.name as name,b.id from patient_details_b as c join patient_details_a as a  on c.pid=a.pid and 
   73  					c.when_added >=:from_date and c.when_added <=:to_date $insurer $company
   74  				left join insurance_company as b on a.type=b.id 
   ..
   97  						$sql2=$error2=$s2='';$placeholders2=array();
   98  						$sql2="SELECT a.sum_number, b.name, b.id FROM (sELECT count( pid ) AS sum_number, company_covered FROM 
   99: 							patient_details_a WHERE TYPE =:patient_type group by company_covered ) AS a 
  100  							LEFT JOIN covered_company AS b ON a.company_covered = b.id order by sum_number desc";
  101  						$error2="Unable to get covered companies under summary patient registration report";
  ...
  121  				$sql="select concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_names, e.name as company_covered,b.name as insurer,
  122  						a.biz_phone,a.mobile_phone,a.email_address,a.email_address_2,c.address,c.pid,c.when_added,a.patient_number
  123: 					from patient_details_b as c join patient_details_a as a  on c.pid=a.pid and 
  124  					c.when_added >=:from_date and c.when_added <=:to_date $insurer $company
  125  				left join insurance_company as b on a.type=b.id
  ...
  209  							) as f join tplan_procedure as g on f.treatment_procedure_id=g.treatment_procedure_id  
  210  						and f.when_added >=:from_date and f.when_added <=:to_date
  211: 					 join patient_details_a as a  on g.pid=a.pid $insurer	
  212: 					join patient_details_b as c on c.pid=g.pid
  213                       join procedures as h on h.id=g.procedure_id                  
  214  				left join insurance_company as b on a.type=b.id
  ...
  225  							) as f join tplan_procedure as g on f.treatment_procedure_id=g.treatment_procedure_id   
  226  						and f.when_added >=:from_date and f.when_added <=:to_date
  227: 					 join patient_details_a as a  on g.pid=a.pid $insurer	
  228: 					join patient_details_b as c on c.pid=g.pid
  229                       join procedures as h on h.id=g.procedure_id                               
  230  				left join insurance_company as b on a.type=b.id

C:\wamp\www\clinic\dental_includes\patient_list.php:
   83  			//summary report
   84  			if(!$exit_flag and $_POST['summary_detail']=='summary'   ){	
   85: 				$sql="select count(c.pid),b.name as name,b.id from patient_details_b as c join patient_details_a as a  on c.pid=a.pid and 
   86  					c.when_added >=:from_date and c.when_added <=:to_date $insurer $company $email_filter
   87  				left join insurance_company as b on a.type=b.id 
   ..
  110  						/*$sql2=$error2=$s2='';$placeholders2=array();
  111  						$sql2="SELECT a.sum_number, b.name, b.id FROM (sELECT count( pid ) AS sum_number, company_covered FROM 
  112: 							patient_details_a left join patient_details_b WHERE 
  113: 							patient_details_a.TYPE =:patient_type and patient_details_b.pid=patient_details_a.pid and 
  114: 							patient_details_b.when_added >=:from_date and patient_details_b.when_added <=:to_date
  115  							group by company_covered  ) AS a 
  116  							 
  ...
  140  				$sql="select concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_names, e.name as company_covered,b.name as insurer,
  141  						a.biz_phone,a.mobile_phone,a.email_address,a.email_address_2,c.address,c.pid,c.when_added,a.patient_number
  142: 					from patient_details_b as c join patient_details_a as a  on c.pid=a.pid and 
  143  					c.when_added >=:from_date and c.when_added <=:to_date $insurer $company $email_filter
  144  				left join insurance_company as b on a.type=b.id
  ...
  249  							) as f join tplan_procedure as g on f.treatment_procedure_id=g.treatment_procedure_id  
  250  						and f.when_added >=:from_date and f.when_added <=:to_date
  251: 					 join patient_details_a as a  on g.pid=a.pid $insurer	
  252: 					join patient_details_b as c on c.pid=g.pid
  253                       join procedures as h on h.id=g.procedure_id                  
  254  				left join insurance_company as b on a.type=b.id
  ...
  265  							) as f join tplan_procedure as g on f.treatment_procedure_id=g.treatment_procedure_id   
  266  						and f.when_added >=:from_date and f.when_added <=:to_date
  267: 					 join patient_details_a as a  on g.pid=a.pid $insurer	
  268: 					join patient_details_b as c on c.pid=g.pid
  269                       join procedures as h on h.id=g.procedure_id                               
  270  				left join insurance_company as b on a.type=b.id
  ...
  423  					$sql2="select patient_number,a.pid,first_name,middle_name,last_name,mobile_phone, biz_phone, email_address, 
  424  							email_address_2,b.name as company_covered,c.name as insurer , points as balance
  425: 							from patient_details_a a 
  426  							left join covered_company b on a.company_covered=b.id 
  427  							left join insurance_company c on a.type=c.id join pt_balances d on a.pid=d.pid

C:\wamp\www\clinic\dental_includes\patient_payments.php:
   14  			//get patient details a
   15  			$sql=$error=$s='';$placeholders=array();	
   16: 			if($criteria=="patient_number"){$sql="select * from patient_details_a where patient_number=:patient_number";}
   17  			elseif($criteria=="receipt_number"){
   18  				$sql="select a.first_name,a.middle_name,a.last_name,a.company_covered,a.type,a.pid,a.patient_number,a.member_no,a.family_id,a.family_title,
   19: 					a.insurance_cover_role from patient_details_a as a join payments as b on a.pid=b.pid and b.receipt_num=:patient_number";
   20  					
   21  			}
   22: 			elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
   23  						//by patient names
   24  			elseif($_POST['search_by']=='first_name' or $_POST['search_by']=='middle_name' or $_POST['search_by']=='last_name'){	
   ..
  113  		$sql="select a.when_added,a.id,a.invoice_id, a.receipt_num, a.amount, a.pay_type,a.tx_number,a.balance,b.first_name, b.middle_name, b.last_name,b.patient_number ,
  114  		c.name
  115: 		from payments as a join patient_details_a as b on a.pid=b.pid
  116  		left join payment_types as c on c.id=a.pay_type
  117  		where a.pid=:pid";
  ...
  119  			$sql="select a.when_added,a.id,a.invoice_id, a.receipt_num, a.amount, a.pay_type,a.tx_number,a.balance,b.first_name, b.middle_name, 
  120  					b.last_name,b.patient_number ,	c.name
  121: 					from payments as a join patient_details_a as b on a.pid=b.pid and a.receipt_num=:receipt_num
  122  					left join payment_types as c on c.id=a.pay_type
  123  					where a.pid=:pid";

C:\wamp\www\clinic\dental_includes\patient_searches_report.php:
   38  		$sql="select patient_contact_searches.when_added, users.first_name as user_fname, users.middle_name as user_mname, 
   39  			users.last_name as user_lname, 
   40: 			patient_details_a.first_name, patient_details_a.middle_name, patient_details_a.last_name, patient_details_a.patient_number,
   41  			insurance_company.name
   42  			
   43  			from patient_contact_searches join users on patient_contact_searches.user_id=users.id $user_criteria
   44: 			join patient_details_a on patient_details_a.pid=patient_contact_searches.pid
   45: 			left join insurance_company on insurance_company.id=patient_details_a.type
   46  			
   47  			where date(patient_contact_searches.when_added)>=:from_date and date(patient_contact_searches.when_added)<=:to_date

C:\wamp\www\clinic\dental_includes\patient_swap.php:
   75  				try{
   76  				$pdo->beginTransaction();
   77: 					//select patient_details_a
   78  					$sql=$error=$s='';$placeholders=array();
   79: 					$sql="select * from patient_details_a where pid=:pid";
   80  					$error="Unable to get patient details";
   81  					$placeholders[':pid']=$old_pid;
   ..
  104  						foreach($s as $row){
  105  							$old_patient_number=html($row['patient_number']);
  106: 							//now insert into patient_details_a
  107  							$sql2=$error2=$s2='';$placeholders2=array();
  108: 							$sql2="insert into patient_details_a set last_name=:last_name, 
  109  								middle_name=:middle_name, first_name=:first_name, mobile_phone=:mobile_phone,
  110  									biz_phone=:biz_phone, type=:type, patient_number=:patient_number, 
  ...
  137  						}	
  138  						
  139: 						//select patient_details_b
  140  						$sql2=$error2=$s2='';$placeholders2=array();
  141: 						$sql2="select * from patient_details_b where pid=:pid";
  142  						$error2="Unable to get patient details 2";
  143  						$placeholders2[':pid']=$old_pid;
  144  						$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);
  145  						foreach($s2 as $row2){
  146: 							//now insert into patient_details_b
  147  							$sql3=$error3=$s3='';$placeholders3=array();
  148: 							$sql3="insert into patient_details_b set id_number=:id_number, address=:address,
  149  								city=:city, occupation=:occupation,weight=:weight, dob=:dob, referee=:referee,
  150  									em_contact=:em_contact,em_relationship=:em_relationship, em_phone=:em_phone,
  ...
  312  			
  313  				$sql=$error=$s='';$placeholders=array();	
  314: 				$sql="select * from patient_details_a where patient_number=:patient_number";
  315  				$placeholders[':patient_number']=$_POST['indv_crit'];
  316  				$error="Error: Unable to get patient details ";

C:\wamp\www\clinic\dental_includes\procedure_count_report.php:
   46  		$sql=$error=$s='';$placeholders=array();
   47  		/*select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
   48: 			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number from payments a, patient_details_a b, users c, payment_types d
   49  			where a.pay_type=:pay_type and a.when_added >=:from_date	and a.when_added <=:to_date and a.pid=b.pid and 
   50  			a.created_by=c.id and d.id=a.pay_type*/
   ..
   52  			$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
   53  				c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number 
   54: 				from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=:pay_type and a.when_added >=:from_date	and a.when_added <=:to_date
   55  				left join users c on a.created_by=c.id
   56  				left join payment_types d on d.id=a.pay_type order by a.id";
   ..
   64  			$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
   65  				c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number , e.first_name, e.middle_name, e.last_name, e.patient_number
   66: 				from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=:pay_type and a.when_added >=:from_date	and a.when_added <=:to_date
   67: 				join patient_details_a e on e.pid=a.tx_number
   68  				left join users c on a.created_by=c.id
   69  				left join payment_types d on d.id=a.pay_type order by a.id";
   ..
  196  		$sql="select a.when_added, a.receipt_num, a.amount, a.tx_number , b.first_name, b.middle_name, b.last_name,
  197  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number ,a.id, b.internal_patient, a.pay_type
  198: 			from payments a join patient_details_a b on a.pid=b.pid and a.when_added >=:from_date and a.when_added <=:to_date
  199  			and a.invoice_id=0 and a.pay_type!=10
  200  			left join users c on a.created_by=c.id
  ...
  217  			c.first_name, c.middle_name, c.last_name ,d.name , b.patient_number , e.first_name, e.middle_name, e.last_name, 
  218  			e.patient_number, a.id, b.internal_patient,a.pay_type
  219: 			from payments a join patient_details_a b on a.pid=b.pid and a.pay_type=10 and a.when_added >=:from_date	and a.when_added <=:to_date
  220  			and a.invoice_id=0
  221: 			join patient_details_a e on e.pid=a.tx_number
  222  			left join users c on a.created_by=c.id
  223  			left join payment_types d on d.id=a.pay_type order by a.id";
  ...
  326  			NULL , 	NULL , NULL , NULL , NULL , NULL, b.internal_patient
  327  				FROM tplan_procedure AS a
  328: 				JOIN patient_details_a AS b ON a.pid = b.pid
  329  				AND a.pay_type =1
  330  				AND date_invoiced >=:from_date
  ...
  463  			NULL , 	NULL , NULL , NULL , NULL , NULL, b.internal_patient
  464  				FROM tplan_procedure AS a
  465: 				JOIN patient_details_a AS b ON a.pid = b.pid
  466  				AND a.pay_type =1	AND date_invoiced <:from_date AND a.invoice_id >0
  467  				JOIN procedures ON a.procedure_id = procedures.id
  ...
  699  		$total_points=0;
  700  		$sql=$error=$s='';$placeholders=array();
  701: 		$sql="select ifnull(sum(amount), 0) from payments as a join patient_details_a as b on a.pid=b.pid and b.internal_patient=0
  702  		where when_added >=:from_date and when_added <=:to_date and a.invoice_id=0 
  703  		and a.pay_type=8";
  ...
  715  		$total_xray=0;
  716  		$sql=$error=$s='';$placeholders=array();
  717: 		$sql="select ifnull(sum(amount), 0) from payments as a join patient_details_a as b on a.pid=b.pid and b.internal_patient=1
  718  		where when_added >=:from_date and when_added <=:to_date and a.invoice_id=0 
  719  		and a.pay_type!=6 and a.pay_type!=7 and a.pay_type!=8 and a.pay_type!=10";
  ...
  731  		$total_cadcam=0;
  732  		$sql=$error=$s='';$placeholders=array();
  733: 		$sql="select ifnull(sum(amount), 0) from payments as a join patient_details_a as b on a.pid=b.pid and b.internal_patient=2
  734  		where when_added >=:from_date and when_added <=:to_date and a.invoice_id=0 
  735  		and a.pay_type!=6 and a.pay_type!=7 and a.pay_type!=8 and a.pay_type!=10";
  ...
  747  		$total_molars_cash=0;
  748  		$sql=$error=$s='';$placeholders=array();
  749: 		$sql="select ifnull(sum(amount), 0) from payments as a join patient_details_a as b on a.pid=b.pid and b.internal_patient=0
  750  		where when_added >=:from_date and when_added <=:to_date and a.invoice_id=0 
  751  		and a.pay_type!=6 and a.pay_type!=7 and a.pay_type!=8 and a.pay_type!=10";
  ...
  832  			NULL , 	NULL , NULL , NULL , NULL , NULL, b.internal_patient
  833  				FROM tplan_procedure AS a
  834: 				JOIN patient_details_a AS b ON a.pid = b.pid
  835  				AND a.pay_type =1
  836  				AND date_invoiced >=:from_date
  ...
  969  			NULL , 	NULL , NULL , NULL , NULL , NULL, b.internal_patient
  970  				FROM tplan_procedure AS a
  971: 				JOIN patient_details_a AS b ON a.pid = b.pid
  972  				AND a.pay_type =1	AND date_invoiced <:from_date AND a.invoice_id >0
  973  				JOIN procedures ON a.procedure_id = procedures.id

C:\wamp\www\clinic\dental_includes\receive_lab_trays.php:
   97  		}*///a.date_returned is not null and
   98  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
   99: 		c.last_name, d.technician_name, a.date_returned from labs a, patient_details_a b, users c, lab_technicians d, lab_trays e where d.id=a.technician and a.pid=b.pid and 
  100  		a.doc_id=c.id  $criteria  and a.lab_id=e.lab_id and a.date_returned is not null and  e.date_returned is null  group by a.lab_id order by a.lab_id ";
  101  		$error="Unable to get work due out";

C:\wamp\www\clinic\dental_includes\referred_cadcam_report.php:
   51  			$sql="select concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_name, a.patient_number, 
   52  				c.name as referrer_name,  d.details, d.date_procedure_added ,d.authorised_cost 
   53: 				from tplan_procedure as d join patient_details_a as a on d.pid=a.pid and a.internal_patient=2 
   54: 				join patient_details_b as b on a.pid=b.pid $referrer_criteria
   55  				left join cadcam_referrer as c on c.id=b.referee
   56  				where date_procedure_added>=:from_date and date_procedure_added<=:to_date
   ..
  164  				c.name as referrer_name,  d.details, d.date_procedure_added ,d.authorised_cost , e.name as insurer,
  165  				f.name as company_covered,d.invoice_number
  166: 				from tplan_procedure as d join patient_details_a as a on d.pid=a.pid and a.internal_patient=2 
  167: 				join patient_details_b as b on a.pid=b.pid $referrer_criteria
  168  				left join cadcam_referrer as c on c.id=b.referee
  169  				left join insurance_company as e on e.id=a.type

C:\wamp\www\clinic\dental_includes\referred_xrays_report.php:
   51  			$sql="select concat(a.first_name,' ',a.middle_name,' ',a.last_name) as patient_name, a.patient_number, 
   52  				c.referrer_name, d.teeth, d.details, d.date_procedure_added ,d.authorised_cost , e.name, f.receipt_num
   53: 				from tplan_procedure as d join patient_details_a as a on d.pid=a.pid and a.internal_patient=1 
   54: 				join patient_details_b as b on a.pid=b.pid $referrer_criteria
   55  				join procedures as e on e.id=d.procedure_id 
   56  				left join  xray_refering_doc as c on c.id=b.referee
   ..
   99  				f.name as company_covered, 	c.referrer_name, d.teeth, d.details, d.date_procedure_added ,d.authorised_cost , 
  100  				d.invoice_number, g.name as procedure_name
  101: 				from tplan_procedure as d join patient_details_a as a on d.pid=a.pid and a.internal_patient=1 
  102: 				join patient_details_b as b on a.pid=b.pid $referrer_criteria
  103  				join procedures as g on g.id=d.procedure_id 
  104  				left join insurance_company as e on e.id=a.type

C:\wamp\www\clinic\dental_includes\school_holiday_appointment.php:
  132  			
  133  		from school_holiday_appointment_reminders a join users b on a.doctor=b.id
  134: 		join patient_details_a c on a.pid=c.pid
  135  		 where a.status=0 and a.holiday_id=:holiday_id order by a.id";
  136  		$error="Unable to get school holiday appts";

C:\wamp\www\clinic\dental_includes\search_for_patient_no_session.php:
    9  			//get patient details a
   10  			$sql=$error=$s='';$placeholders=array();	
   11: 			if($criteria=="patient_number"){$sql="select * from patient_details_a where patient_number=:patient_number ";}//and internal_patient=0
   12: 			elseif($criteria=="pid"){$sql="select * from patient_details_a where pid=:patient_number";}
   13  						//by patient names
   14  			elseif($_POST['search_by']=='first_name' or $_POST['search_by']=='middle_name' or $_POST['search_by']=='last_name'){	

C:\wamp\www\clinic\dental_includes\send_birthday_email.php:
   38  					//get list of pts 
   39  					$sql2=$error2=$s2='';$placeholders2=array();
   40: 					$sql2="select a.pid,first_name, middle_name, last_name, email_address, email_address_2, dob from patient_details_a a, patient_details_b b where a.pid=b.pid ";
   41  					$error2="Unable to get all pts";
   42  					$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);

C:\wamp\www\clinic\dental_includes\send_patient_appointment_email.php:
   31  							registered_patient_appointments.am_pm,
   32  						users.first_name as docf, users.middle_name as docm, users.last_name as docl, 
   33: 						patient_details_a.first_name as ptf, patient_details_a.middle_name as ptm, 
   34: 						patient_details_a.last_name as ptl,patient_details_a.mobile_phone ,surgery_names.surgery_name,
   35: 						e.appointment_date as new_appointment_date ,registered_patient_appointments.smin, patient_details_a.email_address, patient_details_a.email_address_2,patient_details_a.pid
   36  					from registered_patient_appointments join users on registered_patient_appointments.doc_id=users.id
   37: 					join patient_details_a on registered_patient_appointments.pid=patient_details_a.pid  
   38  					left join surgery_names on registered_patient_appointments.surgical_unit=surgery_names.surgery_id
   39  					left join registered_patient_appointments as e on e.id=registered_patient_appointments.new_appointment_id

C:\wamp\www\clinic\dental_includes\surgery_reports - Copy.php:
   49  					date(b.time_allocated) as when_added,c.surgery_name, timediff(b.treatment_finish, b.time_allocated) as waiting_time,
   50  					timestampdiff(minute, b.time_allocated ,b.treatment_finish) * points_per_min as points
   51: 				from patient_allocations as b join patient_details_a as a on  b.pid=a.pid and date(b.time_allocated) >=:from_date 
   52  					and date(b.time_allocated) <=:to_date $suregry
   53  				left join surgery_names as c on c.surgery_id=b.surgery_id 
   ..
   99  					timestampdiff(minute, b.time_allocated ,b.discharge_time) * points_per_min as points,
  100  					a.mobile_phone, a.biz_phone
  101: 				from patient_allocations as b join patient_details_a as a on  b.pid=a.pid and date(b.time_allocated) >=:from_date 
  102  					and date(b.time_allocated) <=:to_date $suregry
  103  				left join surgery_names as c on c.surgery_id=b.surgery_id 

C:\wamp\www\clinic\dental_includes\surgery_reports.php:
   49  					date(b.time_allocated) as when_added,c.surgery_name, timediff(b.treatment_finish, b.time_allocated) as waiting_time,
   50  					timestampdiff(minute, b.time_allocated ,b.treatment_finish) * points_per_min as points
   51: 				from patient_allocations as b join patient_details_a as a on  b.pid=a.pid and date(b.time_allocated) >=:from_date 
   52  					and date(b.time_allocated) <=:to_date $suregry
   53  				left join surgery_names as c on c.surgery_id=b.surgery_id 
   ..
  100  					timestampdiff(minute, b.time_allocated ,b.discharge_time) * points_per_min as points,
  101  					a.mobile_phone, a.biz_phone
  102: 				from patient_allocations as b join patient_details_a as a on  b.pid=a.pid and date(b.time_allocated) >=:from_date 
  103  					and date(b.time_allocated) <=:to_date $suregry
  104  				left join surgery_names as c on c.surgery_id=b.surgery_id 
  ...
  193  			a.pause_treatment, a.resume_treatment ,a.treatment_status, timediff(discharge_time, time_allocated),treatment_finish,
  194  			timediff(treatment_finish, time_start_treatment),timediff(now(), time_start_treatment)
  195: 			from  patient_allocations a, patient_details_a b  where a.patient_type=1 and a.pid=b.pid  and 
  196  			date(time_allocated)>=:from_date and date(time_allocated)<=:to_date order by a.id";
  197  	$error="unable to get current allocations";

C:\wamp\www\clinic\dental_includes\swapped_patients_report.php:
   11  			$sql=$error=$s='';$placeholders=array();	
   12  			$sql="select a.first_name, a.middle_name, a.last_name,b.old_patient_number, b.new_patient_number, c.first_name, c.middle_name,
   13: 					c.last_name, b.when_added from patient_details_a as a join swapped_patients as b on a.pid=b.new_pid 
   14  					join users as c on c.id=b.changed_by 
   15  					where b.when_added>=:from_date and b.when_added<=:to_date";

C:\wamp\www\clinic\dental_includes\tplan_visits.php:
   39  			JOIN tplan_id_generator f ON d.tplan_id = f.tplan_id
   40  			JOIN users e ON e.id = f.created_by
   41: 			JOIN patient_details_a a ON d.pid = a.pid
   42  			LEFT JOIN insurance_company b ON a.type = b.id
   43  			LEFT JOIN covered_company c ON a.company_covered = c.id
   ..
   73  			JOIN tplan_id_generator f ON d.tplan_id = f.tplan_id
   74  			JOIN users e ON e.id = f.created_by
   75: 			JOIN patient_details_a a ON d.pid = a.pid
   76  			LEFT JOIN insurance_company b ON a.type = b.id
   77  			LEFT JOIN covered_company c ON a.company_covered = c.id

C:\wamp\www\clinic\dental_includes\treatment_done_report.php:
   11  		//get the patients names
   12  		$sql=$error=$s='';$placeholders=array();
   13: 		$sql="select first_name,middle_name,last_name, patient_number from patient_details_a where pid=:pid ";
   14  		$placeholders[':pid']=$pid_clean;
   15  		$error="Unable to get patient names for patient";

C:\wamp\www\clinic\dental_includes\treatment_rate.php:
   62  					from tplan_procedure as b join procedures as a on b.procedure_in_alias_invoice=0 and b.procedure_id=a.id and b.date_procedure_added >=:from_date
   63  						and b.date_procedure_added <=:to_date $procedure
   64: 					join patient_details_a as c on c.pid= b.pid and c.internal_patient=0
   65  					join users as d on b.created_by=d.id $doctor
   66  					";

C:\wamp\www\clinic\dental_includes\waiver_approval.php:
   27  	$sql=$error=$s='';$placeholders=array();
   28  	$sql="select a.first_name, a.middle_name, a.last_name,  b.amount,   b.id , b.pid from 
   29: 	patient_details_a a, waiver_approvals b  where b.pay_id=0 and b.pid=a.pid  order by b.id";					
   30  	$error="Unable to get waiver payments pending approval";
   31  	$s = 	select_sql($sql, $placeholders, $error, $pdo);

C:\wamp\www\clinic\dental_includes\work_due_in.php:
  119  		}
  120  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
  121: 		c.last_name, d.technician_name from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid and 
  122  		a.doc_id=c.id  $criteria and date_returned is null $criteria_date order by a.lab_id";
  123  		$error="Unable to get work due out";

C:\wamp\www\clinic\dental_includes\work_due_out.php:
   89  
   90  		$sql="select a.when_added, a.lab_id, a.date_required, a.amount, b.first_name, b.middle_name, b.last_name, c.first_name, c.middle_name, 
   91: 		c.last_name, d.technician_name from labs a, patient_details_a b, users c, lab_technicians d where d.id=a.technician and a.pid=b.pid 
   92  		and a.doc_id=c.id  $criteria and date_picked is null  order by a.lab_id";
   93  		$error="Unable to get work due out";

C:\wamp\www\clinic\dental_includes\xmas.php:
   28  					$sql2=$error2=$s2='';$placeholders2=array();
   29  					$sql2="SELECT a.pid, first_name, middle_name, last_name, email_address, email_address_2, dob
   30: 							FROM patient_details_a a, patient_details_b b WHERE a.pid = b.pid AND a.pid NOT IN ( SELECT pid
   31  							FROM balance_email_log WHERE message_type =3 ) ";
   32  						
   33  						/*$sql2="SELECT a.pid, first_name, middle_name, last_name, email_address, email_address_2, dob
   34: 							FROM patient_details_a a, patient_details_b b WHERE a.pid = b.pid  ";*/
   35  					$error2="Unable to get all pts";
   36  					$s2 = 	select_sql($sql2, $placeholders2, $error2, $pdo);

961 matches across 61 files


Searching 946 files for "dental-images"

C:\wamp\www\clinic\dental.phpproj:
  626      <Compile Include="dental\dental.phpproj" />
  627      <Compile Include="dental\index.php" />
  628:     <Compile Include="dental-images\profile\fb9de3591b3dd9209e8cb800845b4feeb45ba17e.jpg" />
  629:     <Compile Include="dental-images\profile\patient_photo.png" />
  630:     <Compile Include="dental_includes\dental-images\profile\fb9de3591b3dd9209e8cb800845b4feeb45ba17e.jpg" />
  631:     <Compile Include="dental_includes\dental-images\profile\molars_icon.png" />
  632:     <Compile Include="dental_includes\dental-images\profile\patient_photo.png" />
  633      <Compile Include="dental_includes\fpdf\doc\acceptpagebreak.htm" />
  634      <Compile Include="dental_includes\fpdf\doc\addfont.htm" />
  ...
  965      <Folder Include="dental\cadcam" />
  966      <Folder Include="dental\completion" />
  967:     <Folder Include="dental\dental-images\profile" />
  968:     <Folder Include="dental\dental-images" />
  969      <Folder Include="dental\dental-information" />
  970      <Folder Include="dental\dental_b\1316761426\jquery.chromatable-1.3.0\jquery.chromatable-1.3.0\css" />
  ...
 1012      <Folder Include="dental\treatment-plan" />
 1013      <Folder Include="dental" />
 1014:     <Folder Include="dental-images\profile" />
 1015:     <Folder Include="dental-images" />
 1016:     <Folder Include="dental_includes\dental-images\profile" />
 1017:     <Folder Include="dental_includes\dental-images" />
 1018      <Folder Include="dental_includes\fpdf\doc" />
 1019      <Folder Include="dental_includes\fpdf\font" />

C:\wamp\www\clinic\dental\dental.phpproj:
  628      <Folder Include="cadcam" />
  629      <Folder Include="completion" />
  630:     <Folder Include="dental-images\profile" />
  631:     <Folder Include="dental-images" />
  632      <Folder Include="dental-information" />
  633      <Folder Include="dental_b\1316761426\jquery.chromatable-1.3.0\jquery.chromatable-1.3.0\css" />

C:\wamp\www\clinic\dental\patient-contacts\index.php:
  426  
  427  		
  428: 				<?php if(!isset($_SESSION['photo_path']) or $_SESSION['photo_path']==''){$_SESSION['photo_path']="../dental-images/profile/patient_photo.png";}?>
  429  				<div class=''><label for="" class="label"><img src='<?php echo "$_SESSION[photo_path]"; ?>' /> </label></div>
  430  				<div class=''><input type=file value='Upload Patient Photo' name=image_upload /></div>

C:\wamp\www\clinic\dental_includes\access.inc - Copy.php:
 2245  
 2246  	$result = imagejpeg($tmp,$filename,100);
 2247: 	//$result = rename("$filename", "/dental-images/profile/$last");
 2248  	imagedestroy($src);
 2249  	imagedestroy($tmp);

C:\wamp\www\clinic\dental_includes\access.inc.php:
 2377  
 2378  	$result = imagejpeg($tmp,$filename,100);
 2379: 	//$result = rename("$filename", "/dental-images/profile/$last");
 2380  	imagedestroy($src);
 2381  	imagedestroy($tmp);

C:\wamp\www\clinic\dental_includes\access.inc_bk.php:
 1828  
 1829  	$result = imagejpeg($tmp,$filename,100);
 1830: 	//$result = rename("$filename", "/dental-images/profile/$last");
 1831  	imagedestroy($src);
 1832  	imagedestroy($tmp);

C:\wamp\www\clinic\dental_includes\cash_balance_report.php:
  117  <body><table>
  118  				<tbody>
  119: 					<table><tbody><tr><td><img src='../dental_includes/dental-images/profile/molars_icon.png' </td><td>Molars Dental Clinic<br>3rd Flr Electricity House<br>Harambee Avenue City Centre<br>Phone: 020 242 8104 ,  0751 856 900<br>
  120  						Email: $from_email_address<br>Website: www.molars.co.ke	<td></tr></tbody></table>
  121  					<tr class=intro><td>Dear $patient_name,<br>You have an outstanding balance of $balance as shown in your statement below.<br>

18 matches across 7 files
